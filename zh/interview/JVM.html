<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/zh/interview/JVM.html"><meta property="og:site_name" content="主题演示"><meta property="og:title" content="JVM"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="JVM"><title>JVM | 主题演示</title><meta name="description" content="vuepress-theme-hope 的演示">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.dbbe025d.css">
    <link rel="modulepreload" href="/assets/app.70f4e18b.js"><link rel="modulepreload" href="/assets/JVM.html.8514654f.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/JVM.html.0bb340ff.js"><link rel="prefetch" href="/assets/home.html.d675c4b6.js"><link rel="prefetch" href="/assets/intro.html.684ef626.js"><link rel="prefetch" href="/assets/index.html.e8ffec66.js"><link rel="prefetch" href="/assets/slide.html.050a6f1e.js"><link rel="prefetch" href="/assets/disable.html.b507ecac.js"><link rel="prefetch" href="/assets/encrypt.html.762116d5.js"><link rel="prefetch" href="/assets/markdown.html.5acf7a9a.js"><link rel="prefetch" href="/assets/page.html.141b0147.js"><link rel="prefetch" href="/assets/index.html.75bf4c69.js"><link rel="prefetch" href="/assets/home.html.6e361c52.js"><link rel="prefetch" href="/assets/index.html.2d9b62a7.js"><link rel="prefetch" href="/assets/slide.html.6b655fa0.js"><link rel="prefetch" href="/assets/article10.html.f5ea4d77.js"><link rel="prefetch" href="/assets/article11.html.6339c214.js"><link rel="prefetch" href="/assets/article12.html.5ac86a8f.js"><link rel="prefetch" href="/assets/article9.html.666c37a0.js"><link rel="prefetch" href="/assets/Docker.html.de1063e8.js"><link rel="prefetch" href="/assets/Java基础.html.6c0b0f5c.js"><link rel="prefetch" href="/assets/Java容器.html.77448ff5.js"><link rel="prefetch" href="/assets/JUC.html.76307785.js"><link rel="prefetch" href="/assets/Linux.html.90ea1c3b.js"><link rel="prefetch" href="/assets/MySQL.html.73ae62bf.js"><link rel="prefetch" href="/assets/NIO与Netty.html.a73529b1.js"><link rel="prefetch" href="/assets/index.html.2a38d188.js"><link rel="prefetch" href="/assets/Redis.html.78427b11.js"><link rel="prefetch" href="/assets/主流框架.html.f21f66df.js"><link rel="prefetch" href="/assets/分布式与高性能高可用.html.38ab4746.js"><link rel="prefetch" href="/assets/操作系统.html.76b600e3.js"><link rel="prefetch" href="/assets/智力题.html.ec368cec.js"><link rel="prefetch" href="/assets/系统设计.html.fb8f2074.js"><link rel="prefetch" href="/assets/计算机网络.html.1a7f7d0e.js"><link rel="prefetch" href="/assets/设计模式.html.cd48ccf5.js"><link rel="prefetch" href="/assets/disable.html.f629efab.js"><link rel="prefetch" href="/assets/encrypt.html.58d61689.js"><link rel="prefetch" href="/assets/markdown.html.779c42bf.js"><link rel="prefetch" href="/assets/page.html.125d74f5.js"><link rel="prefetch" href="/assets/index.html.3db704fb.js"><link rel="prefetch" href="/assets/article10.html.b5d65d2d.js"><link rel="prefetch" href="/assets/article11.html.b2cf93ee.js"><link rel="prefetch" href="/assets/article12.html.94e1cf22.js"><link rel="prefetch" href="/assets/article9.html.90cf2a62.js"><link rel="prefetch" href="/assets/article1.html.f835efef.js"><link rel="prefetch" href="/assets/article2.html.e4775195.js"><link rel="prefetch" href="/assets/article3.html.bfdf934f.js"><link rel="prefetch" href="/assets/article4.html.69bccee4.js"><link rel="prefetch" href="/assets/article5.html.c7ac5439.js"><link rel="prefetch" href="/assets/article6.html.880c0652.js"><link rel="prefetch" href="/assets/article7.html.2cae84db.js"><link rel="prefetch" href="/assets/article8.html.6c46837c.js"><link rel="prefetch" href="/assets/article1.html.ca54de60.js"><link rel="prefetch" href="/assets/article2.html.a99d479f.js"><link rel="prefetch" href="/assets/article3.html.5a2797ee.js"><link rel="prefetch" href="/assets/article4.html.3ac5a509.js"><link rel="prefetch" href="/assets/article5.html.c09d20ba.js"><link rel="prefetch" href="/assets/article6.html.c9e59f52.js"><link rel="prefetch" href="/assets/article7.html.948e77cc.js"><link rel="prefetch" href="/assets/article8.html.28c3977f.js"><link rel="prefetch" href="/assets/404.html.8a909211.js"><link rel="prefetch" href="/assets/index.html.690b188a.js"><link rel="prefetch" href="/assets/index.html.6085d793.js"><link rel="prefetch" href="/assets/index.html.932078ca.js"><link rel="prefetch" href="/assets/index.html.bb629f30.js"><link rel="prefetch" href="/assets/index.html.92b2d70c.js"><link rel="prefetch" href="/assets/index.html.82840baf.js"><link rel="prefetch" href="/assets/index.html.85406aa8.js"><link rel="prefetch" href="/assets/index.html.7b9124b8.js"><link rel="prefetch" href="/assets/index.html.e1e2a548.js"><link rel="prefetch" href="/assets/index.html.a9a69593.js"><link rel="prefetch" href="/assets/index.html.5b51b72b.js"><link rel="prefetch" href="/assets/index.html.ec7f0295.js"><link rel="prefetch" href="/assets/index.html.e14e2286.js"><link rel="prefetch" href="/assets/index.html.e89216be.js"><link rel="prefetch" href="/assets/index.html.c0adb933.js"><link rel="prefetch" href="/assets/index.html.a45798a3.js"><link rel="prefetch" href="/assets/index.html.e99c516b.js"><link rel="prefetch" href="/assets/index.html.f6be7fb4.js"><link rel="prefetch" href="/assets/index.html.6812b391.js"><link rel="prefetch" href="/assets/index.html.4bae905e.js"><link rel="prefetch" href="/assets/index.html.dfdff039.js"><link rel="prefetch" href="/assets/index.html.963b2596.js"><link rel="prefetch" href="/assets/index.html.bbd9778f.js"><link rel="prefetch" href="/assets/index.html.c6a7a8d4.js"><link rel="prefetch" href="/assets/index.html.0599248b.js"><link rel="prefetch" href="/assets/index.html.4b0a0f3f.js"><link rel="prefetch" href="/assets/index.html.13391f8f.js"><link rel="prefetch" href="/assets/index.html.9a4d8710.js"><link rel="prefetch" href="/assets/index.html.bbd06d0d.js"><link rel="prefetch" href="/assets/index.html.ae769b93.js"><link rel="prefetch" href="/assets/index.html.59a75e1b.js"><link rel="prefetch" href="/assets/index.html.efb1d101.js"><link rel="prefetch" href="/assets/index.html.898df6f8.js"><link rel="prefetch" href="/assets/index.html.6339ac7f.js"><link rel="prefetch" href="/assets/index.html.0ffdd311.js"><link rel="prefetch" href="/assets/index.html.454f52cf.js"><link rel="prefetch" href="/assets/index.html.d8a5ddde.js"><link rel="prefetch" href="/assets/index.html.3be06723.js"><link rel="prefetch" href="/assets/index.html.1d180388.js"><link rel="prefetch" href="/assets/index.html.337241b0.js"><link rel="prefetch" href="/assets/index.html.0be3cd3f.js"><link rel="prefetch" href="/assets/index.html.8e5505d4.js"><link rel="prefetch" href="/assets/index.html.ffdd1452.js"><link rel="prefetch" href="/assets/index.html.d3825f4c.js"><link rel="prefetch" href="/assets/index.html.cd21ad11.js"><link rel="prefetch" href="/assets/index.html.72b3c545.js"><link rel="prefetch" href="/assets/index.html.0262e65d.js"><link rel="prefetch" href="/assets/index.html.8905ca40.js"><link rel="prefetch" href="/assets/index.html.98e54f53.js"><link rel="prefetch" href="/assets/index.html.707c5120.js"><link rel="prefetch" href="/assets/index.html.daf3ede2.js"><link rel="prefetch" href="/assets/home.html.25d3c8da.js"><link rel="prefetch" href="/assets/intro.html.31cc697b.js"><link rel="prefetch" href="/assets/index.html.aa528a4f.js"><link rel="prefetch" href="/assets/slide.html.9ed3a471.js"><link rel="prefetch" href="/assets/disable.html.62512da2.js"><link rel="prefetch" href="/assets/encrypt.html.0d034a15.js"><link rel="prefetch" href="/assets/markdown.html.c1428989.js"><link rel="prefetch" href="/assets/page.html.16d63ffa.js"><link rel="prefetch" href="/assets/index.html.df6b399b.js"><link rel="prefetch" href="/assets/home.html.8779cc04.js"><link rel="prefetch" href="/assets/index.html.f058b37e.js"><link rel="prefetch" href="/assets/slide.html.948fa994.js"><link rel="prefetch" href="/assets/article10.html.f30a487d.js"><link rel="prefetch" href="/assets/article11.html.aa11dbec.js"><link rel="prefetch" href="/assets/article12.html.d29e528f.js"><link rel="prefetch" href="/assets/article9.html.85432915.js"><link rel="prefetch" href="/assets/Docker.html.3af5e19d.js"><link rel="prefetch" href="/assets/Java基础.html.11b2eaaa.js"><link rel="prefetch" href="/assets/Java容器.html.ff8441bb.js"><link rel="prefetch" href="/assets/JUC.html.1e3b5a69.js"><link rel="prefetch" href="/assets/Linux.html.150f926b.js"><link rel="prefetch" href="/assets/MySQL.html.08bb1172.js"><link rel="prefetch" href="/assets/NIO与Netty.html.32423e80.js"><link rel="prefetch" href="/assets/index.html.0b3d8610.js"><link rel="prefetch" href="/assets/Redis.html.0c37a51f.js"><link rel="prefetch" href="/assets/主流框架.html.69fd181a.js"><link rel="prefetch" href="/assets/分布式与高性能高可用.html.8274b7f9.js"><link rel="prefetch" href="/assets/操作系统.html.5bd82cae.js"><link rel="prefetch" href="/assets/智力题.html.56d391f1.js"><link rel="prefetch" href="/assets/系统设计.html.45935af4.js"><link rel="prefetch" href="/assets/计算机网络.html.4ee8249b.js"><link rel="prefetch" href="/assets/设计模式.html.3fd42acf.js"><link rel="prefetch" href="/assets/disable.html.61255a23.js"><link rel="prefetch" href="/assets/encrypt.html.e8d21430.js"><link rel="prefetch" href="/assets/markdown.html.aeb94762.js"><link rel="prefetch" href="/assets/page.html.8e41e2f1.js"><link rel="prefetch" href="/assets/index.html.bb62d8a8.js"><link rel="prefetch" href="/assets/article10.html.2a946719.js"><link rel="prefetch" href="/assets/article11.html.a6c9915a.js"><link rel="prefetch" href="/assets/article12.html.8a223ed6.js"><link rel="prefetch" href="/assets/article9.html.c19afa12.js"><link rel="prefetch" href="/assets/article1.html.e2467b26.js"><link rel="prefetch" href="/assets/article2.html.ca7165d9.js"><link rel="prefetch" href="/assets/article3.html.4ad8551a.js"><link rel="prefetch" href="/assets/article4.html.8cf1226d.js"><link rel="prefetch" href="/assets/article5.html.c0566821.js"><link rel="prefetch" href="/assets/article6.html.fdc68865.js"><link rel="prefetch" href="/assets/article7.html.1d1cf676.js"><link rel="prefetch" href="/assets/article8.html.a5a90998.js"><link rel="prefetch" href="/assets/article1.html.c2199afd.js"><link rel="prefetch" href="/assets/article2.html.19ecf916.js"><link rel="prefetch" href="/assets/article3.html.f3d4cbea.js"><link rel="prefetch" href="/assets/article4.html.c1abea03.js"><link rel="prefetch" href="/assets/article5.html.5cdcfb65.js"><link rel="prefetch" href="/assets/article6.html.46ae2434.js"><link rel="prefetch" href="/assets/article7.html.b8dd70e2.js"><link rel="prefetch" href="/assets/article8.html.ac9ba891.js"><link rel="prefetch" href="/assets/404.html.8a78f857.js"><link rel="prefetch" href="/assets/index.html.c32aaa47.js"><link rel="prefetch" href="/assets/index.html.fa731973.js"><link rel="prefetch" href="/assets/index.html.a226559d.js"><link rel="prefetch" href="/assets/index.html.660bd084.js"><link rel="prefetch" href="/assets/index.html.9e77ca7e.js"><link rel="prefetch" href="/assets/index.html.2f66225a.js"><link rel="prefetch" href="/assets/index.html.a81947db.js"><link rel="prefetch" href="/assets/index.html.602ea4a3.js"><link rel="prefetch" href="/assets/index.html.18cb4d0a.js"><link rel="prefetch" href="/assets/index.html.bea585fa.js"><link rel="prefetch" href="/assets/index.html.16067c99.js"><link rel="prefetch" href="/assets/index.html.cd3a1424.js"><link rel="prefetch" href="/assets/index.html.0257170d.js"><link rel="prefetch" href="/assets/index.html.386f764f.js"><link rel="prefetch" href="/assets/index.html.f655ddbd.js"><link rel="prefetch" href="/assets/index.html.77a93188.js"><link rel="prefetch" href="/assets/index.html.907db0e7.js"><link rel="prefetch" href="/assets/index.html.7b26fcf2.js"><link rel="prefetch" href="/assets/index.html.fef9f6fc.js"><link rel="prefetch" href="/assets/index.html.90ca836c.js"><link rel="prefetch" href="/assets/index.html.da8e3d16.js"><link rel="prefetch" href="/assets/index.html.58cd58ab.js"><link rel="prefetch" href="/assets/index.html.c62cb74c.js"><link rel="prefetch" href="/assets/index.html.35f315df.js"><link rel="prefetch" href="/assets/index.html.241c1593.js"><link rel="prefetch" href="/assets/index.html.4ccf06b7.js"><link rel="prefetch" href="/assets/index.html.f93a9291.js"><link rel="prefetch" href="/assets/index.html.0cf4e90d.js"><link rel="prefetch" href="/assets/index.html.b8dba199.js"><link rel="prefetch" href="/assets/index.html.c9b68406.js"><link rel="prefetch" href="/assets/index.html.0cf084fe.js"><link rel="prefetch" href="/assets/index.html.a0cddae9.js"><link rel="prefetch" href="/assets/index.html.aaf1c09e.js"><link rel="prefetch" href="/assets/index.html.a9d3f092.js"><link rel="prefetch" href="/assets/index.html.73ed18db.js"><link rel="prefetch" href="/assets/index.html.5821ab5d.js"><link rel="prefetch" href="/assets/index.html.9921cdaa.js"><link rel="prefetch" href="/assets/index.html.61c31811.js"><link rel="prefetch" href="/assets/index.html.9658bfb2.js"><link rel="prefetch" href="/assets/index.html.e8e73c1e.js"><link rel="prefetch" href="/assets/index.html.cdaf3c37.js"><link rel="prefetch" href="/assets/index.html.fc13e58d.js"><link rel="prefetch" href="/assets/index.html.0171af6e.js"><link rel="prefetch" href="/assets/index.html.e20025f9.js"><link rel="prefetch" href="/assets/index.html.6ca40dd2.js"><link rel="prefetch" href="/assets/index.html.9ca3b3ac.js"><link rel="prefetch" href="/assets/index.html.84da5923.js"><link rel="prefetch" href="/assets/index.html.2b598a4c.js"><link rel="prefetch" href="/assets/index.html.3afe3f75.js"><link rel="prefetch" href="/assets/index.html.9c0ee66c.js"><link rel="prefetch" href="/assets/index.html.b3a794ff.js"><link rel="prefetch" href="/assets/404.4c9af2ec.js"><link rel="prefetch" href="/assets/Layout.5b24db7e.js"><link rel="prefetch" href="/assets/Slide.93b16e8f.js"><link rel="prefetch" href="/assets/Blog.c190763a.js"><link rel="prefetch" href="/assets/giscus.es.63137db5.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.daae04bf.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.ee1e0284.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.092fbc15.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/zh/" class="brand"><img class="logo" src="/logo.svg" alt="主题演示"><!----><span class="site-name hide-in-pad">主题演示</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/zh/" class="nav-link" aria-label="博客主页"><span class="icon iconfont icon-home" style=""></span>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/home.html" class="nav-link" aria-label="项目主页"><span class="icon iconfont icon-home" style=""></span>项目主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/guide/" class="nav-link" aria-label="使用指南"><span class="icon iconfont icon-creative" style=""></span>使用指南<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="博文"><span class="title"><span class="icon iconfont icon-edit" style=""></span>博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>文章 1-4</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article1.html" class="nav-link" aria-label="文章 1"><span class="icon iconfont icon-edit" style=""></span>文章 1<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article2.html" class="nav-link" aria-label="文章 2"><span class="icon iconfont icon-edit" style=""></span>文章 2<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article3.html" class="nav-link" aria-label="文章 3"><span class="icon iconfont icon-edit" style=""></span>文章 3<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article4.html" class="nav-link" aria-label="文章 4"><span class="icon iconfont icon-edit" style=""></span>文章 4<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>文章 5-12</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article5.html" class="nav-link" aria-label="文章 5"><span class="icon iconfont icon-edit" style=""></span>文章 5<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article6.html" class="nav-link" aria-label="文章 6"><span class="icon iconfont icon-edit" style=""></span>文章 6<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article7.html" class="nav-link" aria-label="文章 7"><span class="icon iconfont icon-edit" style=""></span>文章 7<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article8.html" class="nav-link" aria-label="文章 8"><span class="icon iconfont icon-edit" style=""></span>文章 8<!----></a></li></ul></li><li class="dropdown-item"><a href="/zh/posts/article9.html" class="nav-link" aria-label="文章 9"><span class="icon iconfont icon-edit" style=""></span>文章 9<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article10.html" class="nav-link" aria-label="文章 10"><span class="icon iconfont icon-edit" style=""></span>文章 10<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article11.html" class="nav-link" aria-label="文章 11"><span class="icon iconfont icon-edit" style=""></span>文章 11<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article12.html" class="nav-link" aria-label="文章 12"><span class="icon iconfont icon-edit" style=""></span>文章 12<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="主题文档" class="nav-link"><span class="icon iconfont icon-note" style=""></span>主题文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/" class="nav-link" aria-label="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/zh/interview/JVM.html" class="router-link-active router-link-exact-active nav-link active" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://gitee.com/changluJava/personal-reading" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zh/" class="nav-link sidebar-link sidebar-page" aria-label="博客主页"><span class="icon iconfont icon-home" style=""></span>博客主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/home.html" class="nav-link sidebar-link sidebar-page" aria-label="项目主页"><span class="icon iconfont icon-home" style=""></span>项目主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/slide" class="nav-link sidebar-link sidebar-page" aria-label="幻灯片"><!---->幻灯片<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-creative" style=""></span><a href="/zh/interview/" class="title">面试指南</a><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/zh/interview/Docker.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker"><span class="icon iconfont icon-lock" style=""></span>Docker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/Java%E5%9F%BA%E7%A1%80.html" class="nav-link sidebar-link sidebar-page" aria-label="JAVA"><span class="icon iconfont icon-lock" style=""></span>JAVA<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/Java%E5%AE%B9%E5%99%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="Java容器"><span class="icon iconfont icon-lock" style=""></span>Java容器<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/JUC.html" class="nav-link sidebar-link sidebar-page" aria-label="JUC"><span class="icon iconfont icon-lock" style=""></span>JUC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zh/interview/JVM.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="JVM"><span class="icon iconfont icon-lock" style=""></span>JVM<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_1、jdk版本情况" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、JDK版本情况"><!---->1、JDK版本情况<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_2、内存结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、内存结构"><!---->2、内存结构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_3、hotspot-虚拟机对象探秘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、HotSpot 虚拟机对象探秘"><!---->3、HotSpot 虚拟机对象探秘<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_1、对象的内存布局" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、对象的内存布局"><!---->1、对象的内存布局<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_2、对象的访问定位-句柄、直接指针" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、对象的访问定位（句柄、直接指针）"><!---->2、对象的访问定位（句柄、直接指针）<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_4、垃圾回收" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、垃圾回收"><!---->4、垃圾回收<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_1、堆空间的基本结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、堆空间的基本结构"><!---->1、堆空间的基本结构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_2、gc清理分类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、GC清理分类"><!---->2、GC清理分类<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_3、对象已经死亡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、对象已经死亡？"><!---->3、对象已经死亡？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_4、垃圾收集算法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、垃圾收集算法"><!---->4、垃圾收集算法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_5、垃圾收集器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、垃圾收集器"><!---->5、垃圾收集器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_1、serial-收集器-单线程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、Serial 收集器（单线程）"><!---->1、Serial 收集器（单线程）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_2、parnew-收集器-serial收集器多线程版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、ParNew 收集器（serial收集器多线程版本）"><!---->2、ParNew 收集器（serial收集器多线程版本）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_3、parallel-scavenge-收集器-注重吞吐量" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、Parallel Scavenge 收集器（注重吞吐量）"><!---->3、Parallel Scavenge 收集器（注重吞吐量）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_4、serial-old-收集器-serial的老年代版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、Serial Old 收集器（serial的老年代版本）"><!---->4、Serial Old 收集器（serial的老年代版本）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_5、parallel-old-收集器-parallel的老年代版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、Parallel Old 收集器（Parallel的老年代版本）"><!---->5、Parallel Old 收集器（Parallel的老年代版本）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_6、cms-收集器-获取最短回收停顿时间为目标的收集器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、CMS 收集器（获取最短回收停顿时间为目标的收集器）"><!---->6、CMS 收集器（获取最短回收停顿时间为目标的收集器）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_7、g1-收集器-满足gc停顿要求以及高吞吐" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、G1 收集器（满足GC停顿要求以及高吞吐）"><!---->7、G1 收集器（满足GC停顿要求以及高吞吐）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_7、zgc收集器-stw情况更少" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、ZGC收集器（STW情况更少）"><!---->7、ZGC收集器（STW情况更少）<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_6、类加载器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、类加载器"><!---->6、类加载器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_1、类的加载过程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、类的加载过程"><!---->1、类的加载过程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_2、双亲委派模型介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、双亲委派模型介绍"><!---->2、双亲委派模型介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_3、双亲委派模型的好处" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、双亲委派模型的好处"><!---->3、双亲委派模型的好处<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_4、如果我们不想用双亲委派模型怎么办" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、如果我们不想用双亲委派模型怎么办？"><!---->4、如果我们不想用双亲委派模型怎么办？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_5、自定义类加载器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、自定义类加载器"><!---->5、自定义类加载器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_6、loadclass-、findclass-、defineclass-区别" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、loadClass（）、findClass（）、defineClass（）区别"><!---->6、loadClass（）、findClass（）、defineClass（）区别<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_7、自己写的java-lang-string可以让jvm加载到吗" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、自己写的java.lang.String可以让jvm加载到吗？"><!---->7、自己写的java.lang.String可以让jvm加载到吗？<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_7、最重要的jvm参数总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、最重要的jvm参数总结"><!---->7、最重要的jvm参数总结<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/JVM.html#_8、jdk监测以及故障处理工具" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8、JDK监测以及故障处理工具"><!---->8、JDK监测以及故障处理工具<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/interview/Linux.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux"><span class="icon iconfont icon-lock" style=""></span>Linux<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/MySQL.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL"><span class="icon iconfont icon-lock" style=""></span>MySQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/NIO%E4%B8%8ENetty.html" class="nav-link sidebar-link sidebar-page" aria-label="Netty"><span class="icon iconfont icon-lock" style=""></span>Netty<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/Redis.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis"><span class="icon iconfont icon-lock" style=""></span>Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E4%B8%BB%E6%B5%81%E6%A1%86%E6%9E%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="主流框架"><span class="icon iconfont icon-lock" style=""></span>主流框架<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E9%AB%98%E6%80%A7%E8%83%BD%E9%AB%98%E5%8F%AF%E7%94%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式"><span class="icon iconfont icon-lock" style=""></span>分布式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" class="nav-link sidebar-link sidebar-page" aria-label="操作系统"><span class="icon iconfont icon-lock" style=""></span>操作系统<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E6%99%BA%E5%8A%9B%E9%A2%98.html" class="nav-link sidebar-link sidebar-page" aria-label="智力题"><span class="icon iconfont icon-lock" style=""></span>智力题<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1.html" class="nav-link sidebar-link sidebar-page" aria-label="系统设计"><span class="icon iconfont icon-lock" style=""></span>系统设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" class="nav-link sidebar-link sidebar-page" aria-label="计算机网络"><span class="icon iconfont icon-lock" style=""></span>计算机网络<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="设计模式"><!---->设计模式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="icon iconfont icon-creative" style=""></span><a href="/zh/guide/" class="title">如何使用</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/zh/guide/page.html" class="nav-link sidebar-link sidebar-page" aria-label="页面配置"><span class="icon iconfont icon-page" style=""></span>页面配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/markdown.html" class="nav-link sidebar-link sidebar-page" aria-label="Markdown 展示"><span class="icon iconfont icon-markdown" style=""></span>Markdown 展示<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/disable.html" class="nav-link sidebar-link sidebar-page" aria-label="布局与功能禁用"><span class="icon iconfont icon-config" style=""></span>布局与功能禁用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/encrypt.html" class="nav-link sidebar-link sidebar-page" aria-label="密码加密的文章"><span class="icon iconfont icon-lock" style=""></span>密码加密的文章<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">文章</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note" style=""></span><span class="title">文章 1-4</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">文章 5-12</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note" style=""></span><span class="title">文章 5-8</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">文章 9-12</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/article9.html" class="nav-link sidebar-link sidebar-page" aria-label="文章 9"><span class="icon iconfont icon-edit" style=""></span>文章 9<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article10.html" class="nav-link sidebar-link sidebar-page" aria-label="文章 10"><span class="icon iconfont icon-edit" style=""></span>文章 10<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article11.html" class="nav-link sidebar-link sidebar-page" aria-label="文章 11"><span class="icon iconfont icon-edit" style=""></span>文章 11<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article12.html" class="nav-link sidebar-link sidebar-page" aria-label="文章 12"><span class="icon iconfont icon-edit" style=""></span>文章 12<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-lock" style=""></span>JVM</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://changlu.blog.csdn.net" target="_blank" rel="noopener noreferrer">长路</a></span><span property="author" content="长路"></span></span><!----><!----><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category8 clickable" role="navigation">面试题</li><meta property="articleSection" content="面试题"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag1 clickable" role="navigation">JVM</li></ul><meta property="keywords" content="JVM"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 33 分钟</span><meta property="timeRequired" content="PT33M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_1、jdk版本情况" class="router-link-active router-link-exact-active toc-link level2">1、JDK版本情况</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_2、内存结构" class="router-link-active router-link-exact-active toc-link level2">2、内存结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_3、hotspot-虚拟机对象探秘" class="router-link-active router-link-exact-active toc-link level2">3、HotSpot 虚拟机对象探秘</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_1、对象的内存布局" class="router-link-active router-link-exact-active toc-link level3">1、对象的内存布局</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_2、对象的访问定位-句柄、直接指针" class="router-link-active router-link-exact-active toc-link level3">2、对象的访问定位（句柄、直接指针）</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_4、垃圾回收" class="router-link-active router-link-exact-active toc-link level2">4、垃圾回收</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_1、堆空间的基本结构" class="router-link-active router-link-exact-active toc-link level3">1、堆空间的基本结构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_2、gc清理分类" class="router-link-active router-link-exact-active toc-link level3">2、GC清理分类</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_3、对象已经死亡" class="router-link-active router-link-exact-active toc-link level3">3、对象已经死亡？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_4、垃圾收集算法" class="router-link-active router-link-exact-active toc-link level3">4、垃圾收集算法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_5、垃圾收集器" class="router-link-active router-link-exact-active toc-link level2">5、垃圾收集器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_1、serial-收集器-单线程" class="router-link-active router-link-exact-active toc-link level3">1、Serial 收集器（单线程）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_2、parnew-收集器-serial收集器多线程版本" class="router-link-active router-link-exact-active toc-link level3">2、ParNew 收集器（serial收集器多线程版本）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_3、parallel-scavenge-收集器-注重吞吐量" class="router-link-active router-link-exact-active toc-link level3">3、Parallel Scavenge 收集器（注重吞吐量）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_4、serial-old-收集器-serial的老年代版本" class="router-link-active router-link-exact-active toc-link level3">4、Serial Old 收集器（serial的老年代版本）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_5、parallel-old-收集器-parallel的老年代版本" class="router-link-active router-link-exact-active toc-link level3">5、Parallel Old 收集器（Parallel的老年代版本）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_6、cms-收集器-获取最短回收停顿时间为目标的收集器" class="router-link-active router-link-exact-active toc-link level3">6、CMS 收集器（获取最短回收停顿时间为目标的收集器）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_7、g1-收集器-满足gc停顿要求以及高吞吐" class="router-link-active router-link-exact-active toc-link level3">7、G1 收集器（满足GC停顿要求以及高吞吐）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_7、zgc收集器-stw情况更少" class="router-link-active router-link-exact-active toc-link level3">7、ZGC收集器（STW情况更少）</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_6、类加载器" class="router-link-active router-link-exact-active toc-link level2">6、类加载器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_1、类的加载过程" class="router-link-active router-link-exact-active toc-link level3">1、类的加载过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_2、双亲委派模型介绍" class="router-link-active router-link-exact-active toc-link level3">2、双亲委派模型介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_3、双亲委派模型的好处" class="router-link-active router-link-exact-active toc-link level3">3、双亲委派模型的好处</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_4、如果我们不想用双亲委派模型怎么办" class="router-link-active router-link-exact-active toc-link level3">4、如果我们不想用双亲委派模型怎么办？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_5、自定义类加载器" class="router-link-active router-link-exact-active toc-link level3">5、自定义类加载器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_6、loadclass-、findclass-、defineclass-区别" class="router-link-active router-link-exact-active toc-link level3">6、loadClass（）、findClass（）、defineClass（）区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_7、自己写的java-lang-string可以让jvm加载到吗" class="router-link-active router-link-exact-active toc-link level3">7、自己写的java.lang.String可以让jvm加载到吗？</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_7、最重要的jvm参数总结" class="router-link-active router-link-exact-active toc-link level2">7、最重要的jvm参数总结</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/JVM.html#_8、jdk监测以及故障处理工具" class="router-link-active router-link-exact-active toc-link level2">8、JDK监测以及故障处理工具</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="jvm" tabindex="-1"><a class="header-anchor" href="#jvm" aria-hidden="true">#</a> JVM</h1><h2 id="_1、jdk版本情况" tabindex="-1"><a class="header-anchor" href="#_1、jdk版本情况" aria-hidden="true">#</a> 1、JDK版本情况</h2><p>JDK1.6：方法区被称为永久代是属于JVM的，此时常量池依旧在方法区中(永久代里)。</p><p>JDK1.7：字符串常量池被从方法区拿到了堆中，运行时常量池剩下的东西还在方法区。</p><p>JDK1.8：永久代改名为元空间，此时不再属于JVM管理，而是移动到了本地内存、由操作系统来进行管理，与此同时常量池被移动到了堆中。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206140850566.jpg" alt="img" loading="lazy"><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206140850571.jpg" alt="img" loading="lazy"></p><p>无论是jdk8、还是jdk6对于他们的存储空间我们都可以通过指定虚拟机参数来限制他们的大小。</p><h2 id="_2、内存结构" tabindex="-1"><a class="header-anchor" href="#_2、内存结构" aria-hidden="true">#</a> 2、内存结构</h2><p>内存结构：私有的(程序计数器、虚拟机栈、本地方法栈)、公共的(堆、方法区) 引出JDK不同版本的一个区域情况</p><p>程序计数器：记住下一条jvm指令的执行地址。</p><p>虚拟机栈：线程运行时所需要的内存空间，一个栈由多个帧栈组成，帧栈指的是每个方法所需要的运行内存。</p><p>本地方法栈：给本地方法运行提供内存空间。</p><p>堆：创建对象使用到的堆内存。</p><p>方法区：存储类结构相关的信息，如常量池、Class类、ClassLoader、成员变量、方法数据、成员方法等。</p><h2 id="_3、hotspot-虚拟机对象探秘" tabindex="-1"><a class="header-anchor" href="#_3、hotspot-虚拟机对象探秘" aria-hidden="true">#</a> 3、HotSpot 虚拟机对象探秘</h2><h3 id="_1、对象的内存布局" tabindex="-1"><a class="header-anchor" href="#_1、对象的内存布局" aria-hidden="true">#</a> 1、对象的内存布局</h3><p>在 Hotspot 虚拟机中，对象在内存中的布局可以分为 3 块区域：<strong>对象头</strong>、<strong>实例数据</strong>和<strong>对齐填充</strong>。</p><p><strong>Hotspot 虚拟机的对象头包括两部分信息</strong>，<strong>第一部分用于存储对象自身的运行时数据</strong>（哈希码、GC 分代年龄、锁状态标志等等），<strong>另一部分是类型指针</strong>，即对象指向它的类元数据的指针，虚拟机通过这个指针来确定这个对象是哪个类的实例。</p><p><strong>实例数据部分是对象真正存储的有效信息</strong>，也是在程序中所定义的各种类型的字段内容。</p><p><strong>对齐填充部分不是必然存在的，也没有什么特别的含义，仅仅起占位作用。</strong> 因为 Hotspot 虚拟机的自动内存管理系统要求对象起始地址必须是 8 字节的整数倍，换句话说就是对象的大小必须是 8 字节的整数倍。而对象头部分正好是 8 字节的倍数（1 倍或 2 倍），因此，当对象实例数据部分没有对齐时，就需要通过对齐填充来补全。</p><h3 id="_2、对象的访问定位-句柄、直接指针" tabindex="-1"><a class="header-anchor" href="#_2、对象的访问定位-句柄、直接指针" aria-hidden="true">#</a> 2、对象的访问定位（句柄、直接指针）</h3><p>建立对象就是为了使用对象，我们的 Java 程序通过栈上的 reference 数据来操作堆上的具体对象。对象的访问方式由虚拟机实现而定，目前主流的访问方式有：<strong>使用句柄</strong>、<strong>直接指针</strong>。</p><blockquote><p>句柄</p></blockquote><p>如果使用句柄的话，那么 Java 堆中将会划分出一块内存来作为句柄池，reference 中存储的就是对象的句柄地址，而句柄中包含了对象实例数据与类型数据各自的具体地址信息。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191531670.png" alt="image-20220619153123586" loading="lazy"></p><blockquote><p>直接指针</p></blockquote><p>如果使用直接指针访问，那么 Java 堆对象的布局中就必须考虑如何放置访问类型数据的相关信息，而 reference 中存储的直接就是对象的地址。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191532692.png" alt="image-20220619153214622" loading="lazy"></p><p>这两种对象访问方式各有优势。使用句柄来访问的最大好处是 reference 中存储的是稳定的句柄地址，在对象被移动时只会改变句柄中的实例数据指针，而 reference 本身不需要修改。使用直接指针访问方式最大的好处就是速度快，它节省了一次指针定位的时间开销。</p><h2 id="_4、垃圾回收" tabindex="-1"><a class="header-anchor" href="#_4、垃圾回收" aria-hidden="true">#</a> 4、垃圾回收</h2><p>Java 自动内存管理最核心的功能是 <strong>堆</strong> 内存中对象的分配与回收。</p><p>Java 堆还可以细分为：新生代和老年代：再细致一点有：Eden 空间、From Survivor、To Survivor 空间等。</p><ul><li><strong>进一步划分的目的是更好地回收内存，或者更快地分配内存。</strong></li></ul><h3 id="_1、堆空间的基本结构" tabindex="-1"><a class="header-anchor" href="#_1、堆空间的基本结构" aria-hidden="true">#</a> 1、堆空间的基本结构</h3><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191540738.png" alt="image-20220619154008671" loading="lazy"></p><p>Eden 区、From Survivor0(&quot;From&quot;) 区、To Survivor1(&quot;To&quot;) 区都属于新生代，Old Memory 区属于老年代。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>大致过程：
首先伊甸园中的内存被占满时，就会触发一次垃圾回收（Minor GC），此时就会采用复制算法将存活的对象复制到幸存区To中，此时在幸存区中的对象寿命会进行+1，之后对伊甸园进行垃圾清理，紧接着To与From分区进行交换位置。

紧接着又重新创建对象分配空间在伊甸园中，若此时内存又要占满了，紧接着会触发第二次垃圾回收，此时会对伊甸园以及幸存区From中对象进行存活判断，接着将存活的对象再次重新放置到幸存区To中，此时他们的寿命都会依次+1，原本就在幸存区的此时就是2，在伊甸园中的对象则为1，此时对From与伊甸园进行垃圾回收，再次将To与From进行交换位置。

若是在幸存区中的对象寿命超过阈值(例如15)，此时会将其对象径直复制到老年代中！

情况：若是新生代、老年代区域都快放满了，此时来了一个对象新生代放不下、老年代放不下，此时会先触发新生代的GC（Minor GC）若是还是空间不足就会触发Full GC（连带老年代垃圾回收），对整个堆进行清理。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当老年代空间不足，会先尝试触发 minor gc，如果之后空间仍不足，那么触发 full gc，STW的时间更长。</p><ul><li>老年代采用的回收算法与新生代不一样，由于存活对象比较多清除起来比较慢，采用的算法是<code>标记+清除</code>或<code>标记+整理</code>，前者速度会快一些，后者会慢一些。</li></ul><h3 id="_2、gc清理分类" tabindex="-1"><a class="header-anchor" href="#_2、gc清理分类" aria-hidden="true">#</a> 2、GC清理分类</h3><p>针对 HotSpot VM 的实现，它里面的 GC 其实准确分类只有两大种：</p><p>部分收集 (Partial GC)：</p><ul><li>新生代收集（Minor GC / Young GC）：只对新生代进行垃圾收集；</li><li>老年代收集（Major GC / Old GC）：只对老年代进行垃圾收集。需要注意的是 Major GC 在有的语境中也用于指代整堆收集； <ul><li>混合收集（Mixed GC）：对整个新生代和部分老年代进行垃圾收集。</li></ul></li></ul><p>整堆收集 (Full GC)：收集整个 Java 堆和方法区。</p><h3 id="_3、对象已经死亡" tabindex="-1"><a class="header-anchor" href="#_3、对象已经死亡" aria-hidden="true">#</a> 3、对象已经死亡？</h3><h4 id="_1、认识引用、可达分析算法" tabindex="-1"><a class="header-anchor" href="#_1、认识引用、可达分析算法" aria-hidden="true">#</a> 1、认识引用、可达分析算法</h4><p>包含引用技术、可达分析算法。（jvm采用的是可达分析算法）</p><p><strong>引用计数</strong>：</p><p><strong>做法</strong>：给对象中添加一个引用计数器，每当有一个地方引用它，计数器就加 1；当引用失效，计数器就减 1；任何时候计数器为 0 的对象就是不可能再被使用的。<strong>这个方法实现简单，效率高，但是目前主流的虚拟机中并没有选择这个算法来管理内存，其最主要的原因是它很难解决对象之间相互循环引用的问题。</strong></p><ul><li>问题描述： 所谓对象之间的相互引用问题，如下面代码所示：除了对象 objA 和 objB 相互引用着对方之外，这<strong>两个对象之间再无任何引用。但是他们因为互相引用对方，导致它们的引用计数器都不为 0</strong>，于是引用计数算法无法通知 GC 回收器回收他们。</li></ul><p><strong>可达分析</strong>：</p><p>做法：通过一系列的称为 <strong>“GC Roots”</strong> 的对象作为起点，从这些节点开始向下搜索，节点所走过的路径称为引用链，当一个对象到 GC Roots 没有任何引用链相连的话，则证明此对象是不可用的，需要被回收。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191551977.png" alt="image-20220619155154864" loading="lazy"></p><p><strong>哪些对象可以作为 GC Roots 呢？</strong></p><ul><li>虚拟机栈(栈帧中的本地变量表)中引用的对象</li><li>本地方法栈(Native 方法)中引用的对象</li><li>方法区中类静态属性引用的对象</li><li>方法区中常量引用的对象</li><li>所有被同步锁持有的对象</li></ul><h4 id="_2、对象可以被回收-就代表一定会被回收吗" tabindex="-1"><a class="header-anchor" href="#_2、对象可以被回收-就代表一定会被回收吗" aria-hidden="true">#</a> 2、对象可以被回收，就代表一定会被回收吗？</h4><p>即使在可达性分析法中不可达的对象，也并非是“非死不可”的，这时候它们暂时处于“缓刑阶段”，要真正宣告一个对象死亡，至少要经历两次标记过程；可达性分析法中不可达的对象被第一次标记并且进行一次筛选，筛选的条件是此对象是否有必要执行 <code>finalize</code> 方法。当对象没有覆盖 <code>finalize</code> 方法，或 <code>finalize</code> 方法已经被虚拟机调用过时，虚拟机将这两种情况视为没有必要执行。</p><p>被判定为需要执行的对象将会被放在一个队列中进行第二次标记，除非这个对象与引用链上的任何一个对象建立关联，否则就会被真的回收。</p><blockquote><p><code>Object</code> 类中的 <code>finalize</code> 方法一直被认为是一个糟糕的设计，成为了 Java 语言的负担，影响了 Java 语言的安全和 GC 的性能。JDK9 版本及后续版本中各个类中的 <code>finalize</code> 方法会被逐渐弃用移除。忘掉它的存在吧！</p></blockquote><h4 id="_3、引用类型有哪些" tabindex="-1"><a class="header-anchor" href="#_3、引用类型有哪些" aria-hidden="true">#</a> 3、引用类型有哪些？</h4><p>JDK1.2 之前，Java 中引用的定义很传统：如果 reference 类型的数据存储的数值代表的是另一块内存的起始地址，就称这块内存代表一个引用。</p><p>JDK1.2 以后，Java 对引用的概念进行了扩充，将引用分为<strong>强引用、软引用、弱引用、虚引用</strong>四种（引用强度逐渐减弱）</p><blockquote><p>各个引用介绍</p></blockquote><p>强引用：实际代码编写中就是强引用，也不会靠随意回收具有强引用的对象来解决内存不足问题。</p><p>软引用：对于一些可删去的资源我们可以使用<code>SoftReference</code>来及进行包装，一旦内存空间不足会进行垃圾回收将这些软引用回收掉。</p><ul><li>软引用-引用队列：在new SoftReference()中将queue作为第二个参数传入，一旦GC进行垃圾回收若是将软引用引用的对象回收掉，那么该软引用也会被添加到队列中，我们可以通过手动进行移除队列。</li></ul><p>弱引用-<code>WeakReference</code>：<strong>在垃圾回收时就会被清理</strong>。使用方式与软引用相同，只不过换一个对象而已</p><p>虚引用（PhantomReference）：虚引用并不会决定对象的生命周期。如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收。</p><ul><li>主要作用：<strong>虚引用主要用来跟踪对象被垃圾回收的活动</strong>。</li><li>虚引用与软引用和弱引用的一个区别在于：虚引用必须和引用队列（ReferenceQueue）联合使用。</li></ul><h4 id="_4、如何判断一个常量是废弃常量" tabindex="-1"><a class="header-anchor" href="#_4、如何判断一个常量是废弃常量" aria-hidden="true">#</a> 4、如何判断一个常量是废弃常量？</h4><p>假如在字符串常量池中存在字符串 &quot;abc&quot;，如果当前没有任何 String 对象引用该字符串常量的话，就说明常量 &quot;abc&quot; 就是废弃常量，如果这时发生内存回收的话而且有必要的话，&quot;abc&quot; 就会被系统清理出常量池了。</p><h4 id="_5、如何判断一个类是无用的类" tabindex="-1"><a class="header-anchor" href="#_5、如何判断一个类是无用的类" aria-hidden="true">#</a> 5、如何判断一个类是无用的类</h4><p>方法区主要回收的是无用的类，那么如何判断一个类是无用的类的呢？</p><p>判定一个常量是否是“废弃常量”比较简单，而要判定一个类是否是“无用的类”的条件则相对苛刻许多。类需要同时满足下面 3 个条件才能算是 <strong>“无用的类”</strong> ：</p><ul><li>该类所有的实例都已经被回收，也就是 Java 堆中不存在该类的任何实例。</li><li>加载该类的 <code>ClassLoader</code> 已经被回收。</li><li>该类对应的 <code>java.lang.Class</code> 对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。</li></ul><p>虚拟机可以对满足上述 3 个条件的无用类进行回收，这里说的仅仅是“可以”，而并不是和对象一样不使用了就会必然被回收。</p><h3 id="_4、垃圾收集算法" tabindex="-1"><a class="header-anchor" href="#_4、垃圾收集算法" aria-hidden="true">#</a> 4、垃圾收集算法</h3><h4 id="_1、标记-清除算法" tabindex="-1"><a class="header-anchor" href="#_1、标记-清除算法" aria-hidden="true">#</a> 1、标记-清除算法</h4><p>该算法分为“标记”和“清除”阶段：首先标记出所有不需要回收的对象，在标记完成后统一回收掉所有没有被标记的对象。它是最基础的收集算法，后续的算法都是对其不足进行改进得到。这种垃圾收集算法会带来两个明显的问题：</p><ol><li><strong>效率问题</strong></li><li><strong>空间问题（标记清除后会产生大量不连续的碎片）</strong></li></ol><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191613165.png" alt="image-20220619161315067" loading="lazy"></p><h4 id="_2、标记-复制算法" tabindex="-1"><a class="header-anchor" href="#_2、标记-复制算法" aria-hidden="true">#</a> 2、标记-复制算法</h4><p>为了解决效率问题，“标记-复制”收集算法出现了。它可以将内存分为大小相同的两块，每次使用其中的一块。当这一块的内存使用完后，就将还存活的对象复制到另一块去，然后再把使用的空间一次清理掉。这样就使每次的内存回收都是对内存区间的一半进行回收。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191614286.png" alt="image-20220619161400185" loading="lazy"></p><h4 id="_3、标记-整理算法" tabindex="-1"><a class="header-anchor" href="#_3、标记-整理算法" aria-hidden="true">#</a> 3、标记-整理算法</h4><p>根据老年代的特点提出的一种标记算法，标记过程仍然与“标记-清除”算法一样，但后续步骤不是直接对可回收对象回收，而是让所有存活的对象向一端移动，然后直接清理掉端边界以外的内存。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191614315.png" alt="image-20220619161444251" loading="lazy"></p><h4 id="_4、分代收集算法" tabindex="-1"><a class="header-anchor" href="#_4、分代收集算法" aria-hidden="true">#</a> 4、分代收集算法</h4><p>当前虚拟机的垃圾收集都采用分代收集算法。</p><p>这种算法没有什么新的思想，只是根据对象存活周期的不同将内存分为几块。一般将 java 堆分为新生代和老年代，这样我们就可以根据各个年代的特点选择合适的垃圾收集算法。</p><ul><li>比如在新生代中，每次收集都会有大量对象死去，所以可以选择”**标记-复制“**算法，只需要付出少量对象的复制成本就可以完成每次垃圾收集。</li><li>而老年代的对象存活几率是比较高的，而且没有额外的空间对它进行分配担保，所以我们必须选择**“标记-清除”<strong>或</strong>“标记-整理”**算法进行垃圾收集。</li></ul><h4 id="_5、hotspot为什么要分为新生代和老年代" tabindex="-1"><a class="header-anchor" href="#_5、hotspot为什么要分为新生代和老年代" aria-hidden="true">#</a> 5、HotSpot为什么要分为新生代和老年代？</h4><blockquote><p><a href="https://blog.csdn.net/baihehaitangyijiu/article/details/105245065" target="_blank" rel="noopener noreferrer">HotSpot为什么要分为新生代和老年代？为什么要有Survivor区？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>因为有的对象寿命长，有的对象寿命短。应该将寿命长的对象放在一个区，寿命短的对象放在一个区。不同的区采用不同的垃圾收集算法。寿命短的区清理频次高一点，寿命长的区清理频次低一点。提高效率。</p><h4 id="_6、为什么要有survivor区" tabindex="-1"><a class="header-anchor" href="#_6、为什么要有survivor区" aria-hidden="true">#</a> 6、为什么要有Survivor区？</h4><p>如果没有Survivor区，那么Eden每次满了清理垃圾，存活的对象被迁移到老年区，老年区满了，就会触发Full GC，Full GC是非常耗时的，解决办法：</p><p>增加老年代内存，那么老年代清理频次减少，但清理一次花费时间更长。 减少老年代内存，老年代一次FullGC时间更少，频率增加。 都不行，只有再加一层Survivor。将Eden区满了的对象，添加到Survivor区，等对象反复清理几遍之后都没清理掉，再放到老年区，这样老年区的压力就会小很多。<strong>即Survivor相当于一个筛子，筛掉生命周期短的，将生命周期长的放到老年代区，减少老年代被清理的次数</strong>。</p><h4 id="_7、为什么要加两个survivor" tabindex="-1"><a class="header-anchor" href="#_7、为什么要加两个survivor" aria-hidden="true">#</a> 7、为什么要加两个Survivor？</h4><p>清理内存，很容易产生内存碎片，为了不产生内存碎片，我才用复制算法，将Eden区和Survivor区存活的对象整齐的放到一个空的内存。因为生命周期一般都比较短，所以在存活对象不多的情况下，复制算法效率还是比较高的。</p><p>这样就需要一个空内存，而我如果有三个区，这样就总可以保持一个是空的，这样我清理垃圾的时候，就可以将存活对象全部都整齐的放到一个空的内存中，不产生内存碎片了。</p><h2 id="_5、垃圾收集器" tabindex="-1"><a class="header-anchor" href="#_5、垃圾收集器" aria-hidden="true">#</a> 5、垃圾收集器</h2><p><strong>那么垃圾收集器就是内存回收的具体实现。</strong></p><p>虽然我们对各个收集器进行比较，但并非要挑选出一个最好的收集器。因为直到现在为止还没有最好的垃圾收集器出现，更加没有万能的垃圾收集器，<strong>我们能做的就是根据具体应用场景选择适合自己的垃圾收集器</strong>。试想一下：如果有一种四海之内、任何场景下都适用的完美收集器存在，那么我们的 HotSpot 虚拟机就不会实现那么多不同的垃圾收集器了。</p><h3 id="_1、serial-收集器-单线程" tabindex="-1"><a class="header-anchor" href="#_1、serial-收集器-单线程" aria-hidden="true">#</a> 1、Serial 收集器（单线程）</h3><p>Serial（串行）收集器是最基本、历史最悠久的垃圾收集器了。</p><p>它的 <strong>“单线程”</strong> 的意义不仅仅意味着它只会使用一条垃圾收集线程去完成垃圾收集工作，更重要的是它在进行垃圾收集工作的时候必须暂停其他所有的工作线程（ <strong>&quot;Stop The World&quot;</strong> ），直到它收集结束。</p><p>不同区算法：新生代采用<code>标记-复制</code>算法，老年代采用<code>标记-整理</code>算法。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191621513.png" alt="image-20220619162129453" loading="lazy"></p><p>虚拟机的设计者们当然知道 Stop The World 带来的不良用户体验，所以在后续的垃圾收集器设计中停顿时间在不断缩短（仍然还有停顿，寻找最优秀的垃圾收集器的过程仍然在继续）。</p><p>但是 Serial 收集器有没有优于其他垃圾收集器的地方呢？当然有，它<strong>简单而高效（与其他收集器的单线程相比）</strong>。</p><p><strong>优点</strong>：Serial 收集器由于没有线程交互的开销，自然可以获得很高的单线程收集效率。Serial 收集器对于运行在 Client 模式下的虚拟机来说是个不错的选择。</p><h3 id="_2、parnew-收集器-serial收集器多线程版本" tabindex="-1"><a class="header-anchor" href="#_2、parnew-收集器-serial收集器多线程版本" aria-hidden="true">#</a> 2、ParNew 收集器（serial收集器多线程版本）</h3><p>ParNew 收集器其实就是 Serial 收集器的多线程版本，除了<strong>使用多线程进行垃圾收集外</strong>，其余行为（控制参数、收集算法、回收策略等等）和 Serial 收集器完全一样。</p><p>不同区算法：新生代采用<code>标记-复制</code>算法，老年代采用<code>标记-整理</code>算法。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191622418.png" alt="image-20220619162252357" loading="lazy"></p><p>它是许多运行在 Server 模式下的虚拟机的首要选择，除了 Serial 收集器外，只有它能与 CMS 收集器（真正意义上的并发收集器，后面会介绍到）配合工作。</p><h3 id="_3、parallel-scavenge-收集器-注重吞吐量" tabindex="-1"><a class="header-anchor" href="#_3、parallel-scavenge-收集器-注重吞吐量" aria-hidden="true">#</a> 3、Parallel Scavenge 收集器（注重吞吐量）</h3><p>Parallel Scavenge 收集器也是使用<code>标记-复制</code>算法的多线程收集器，它看上去几乎和 ParNew 都一样。 <strong>那么它有什么特别之处呢？</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-XX:+UseParallelGC：使用 Parallel 收集器+ 老年代串行
-XX:+UseParallelOldGC：使用 Parallel 收集器+ 老年代并行
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Parallel Scavenge 收集器关注点是吞吐量（高效率的利用 CPU）。CMS 等垃圾收集器的关注点更多的是用户线程的停顿时间（提高用户体验）。所谓吞吐量就是 CPU 中用于运行用户代码的时间与 CPU 总消耗时间的比值。</p><p>不同区算法：新生代采用<code>标记-复制</code>算法，老年代采用<code>标记-整理</code>算法。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191626129.png" alt="image-20220619162601068" loading="lazy"></p><p>JDK1.8 默认使用的是 Parallel Scavenge + Parallel Old，如果指定了-XX:+UseParallelGC 参数，则默认指定了-XX:+UseParallelOldGC，可以使用-XX:-UseParallelOldGC 来禁用该功能</p><h3 id="_4、serial-old-收集器-serial的老年代版本" tabindex="-1"><a class="header-anchor" href="#_4、serial-old-收集器-serial的老年代版本" aria-hidden="true">#</a> 4、Serial Old 收集器（serial的老年代版本）</h3><p><strong>Serial 收集器的老年代版本</strong>，它同样是一个单线程收集器。它主要有两大用途：一种用途是在 JDK1.5 以及以前的版本中与 Parallel Scavenge 收集器搭配使用，另一种用途是作为 CMS 收集器的后备方案。</p><h3 id="_5、parallel-old-收集器-parallel的老年代版本" tabindex="-1"><a class="header-anchor" href="#_5、parallel-old-收集器-parallel的老年代版本" aria-hidden="true">#</a> 5、Parallel Old 收集器（Parallel的老年代版本）</h3><p><strong>Parallel Scavenge 收集器的老年代版本</strong>。使用多线程和“<code>标记-整理</code>”算法。在注重吞吐量以及 CPU 资源的场合，都可以优先考虑 Parallel Scavenge 收集器和 Parallel Old 收集器。</p><h3 id="_6、cms-收集器-获取最短回收停顿时间为目标的收集器" tabindex="-1"><a class="header-anchor" href="#_6、cms-收集器-获取最短回收停顿时间为目标的收集器" aria-hidden="true">#</a> <strong>6、CMS 收集器（获取最短回收停顿时间为目标的收集器）</strong></h3><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206221026671.png" alt="image-20220622102618594" loading="lazy"></p><ul><li>在初始标记以及重新标记进行stw了。</li></ul><p>CMS（Concurrent Mark Sweep）收集器是一种以获取最短回收停顿时间为目标的收集器。它非常符合在注重用户体验的应用上使用。</p><p>CMS（Concurrent Mark Sweep）收集器是 HotSpot 虚拟机第一款真正意义上的并发收集器，它第一次实现了让垃圾收集线程与用户线程（基本上）同时工作。</p><p>采用算法：标记-清除算法</p><p>整个过程分为四个步骤：</p><ul><li><strong>初始标记：</strong> 暂停所有的其他线程，并记录下直接与 root 相连的对象，速度很快 ；</li><li><strong>并发标记：</strong> 同时开启 GC 和用户线程，用一个闭包结构去记录可达对象。但在这个阶段结束，这个闭包结构并不能保证包含当前所有的可达对象。因为用户线程可能会不断的更新引用域，所以 GC 线程无法保证可达性分析的实时性。所以这个算法里会跟踪记录这些发生引用更新的地方。</li><li><strong>重新标记：</strong> 重新标记阶段就是为了修正并发标记期间因为用户程序继续运行而导致标记产生变动的那一部分对象的标记记录，这个阶段的停顿时间一般会比初始标记阶段的时间稍长，远远比并发标记阶段时间短</li><li><strong>并发清除：</strong> 开启用户线程，同时 GC 线程开始对未标记的区域做清扫。</li></ul><p>主要优点：<strong>并发收集、低停顿</strong>。但是它有下面三个明显的缺点：</p><ul><li><strong>对 CPU 资源敏感；</strong></li><li><strong>无法处理浮动垃圾；</strong></li><li><strong>它使用的回收算法-“标记-清除”算法会导致收集结束时会有大量空间碎片产生。</strong></li></ul><blockquote><p>牛客回答</p></blockquote><p>老年代、低停顿、标记清除、四个步骤</p><p>CMS收集器（老年代、低停顿、标记清除）是一种以<strong>获取最短回收停顿时间为目标的收集器</strong>,从名字上就可以看出CMS收集器是<strong>基于标记清除算法实现的</strong>,它的运作过程相对于前面几种收集器来说要更复杂一些,整个过程分为四个步骤,包括：初始标记、并发标记、重新标记、并发清除。其中初始标记、重新标记这两个步骤仍然需要“Stop The World”。</p><ol><li><p>初始标记仅仅只是标记一下GC Roots能直接关联到的对象,速度很快。</p></li><li><p>并发标记阶段就是从GC Roots的直接关联对象开始遍历整个对象图的过程,这个过程耗时较长但是不需要停顿用户线程,可以与垃圾收集线程一起并发运行。</p></li><li><p>重新标记阶段则是为了修正并发标记期间,因用户程序继续运作而导致标记产生变动的那一部分对象的标记记录,这个阶段的停顿时间通常会比初始标记阶段稍长一些,但也远比并发标记阶段的时间短。</p></li><li><p>并发清除阶段,清理删除掉标记阶段判断的已经死亡的对象,由于不需要移动存活对象,所以这个阶段也是可以与用户线程同时并发的。</p></li></ol><p>加分回答 CMS是一款优秀的收集器,它最主要的优点在名字上已经体现出来：<strong>并发收集、低停顿</strong>,一些官方公开文档里面也称之为“并发低停顿收集器”。CMS收集器是HotSpot虚拟机追求低停顿的第一次成功尝试,但是它还远达不到完美的</p><p>至少有以下三个明显的缺点：</p><ol><li><p>并发阶段,它虽然不会导致用户线程停顿,却因为占用一部分线程而导致应用程序变慢,降低总吞吐量。</p></li><li><p>它无法处理“浮动垃圾”,有可能会出现“并发失败”进而导致另一次Full GC的发生。</p></li><li><p>它是一款基于标记清除算法实现的收集器,这意味着收集结束时会有大量空间碎片产生。</p></li></ol><h3 id="_7、g1-收集器-满足gc停顿要求以及高吞吐" tabindex="-1"><a class="header-anchor" href="#_7、g1-收集器-满足gc停顿要求以及高吞吐" aria-hidden="true">#</a> <strong>7、G1 收集器（满足GC停顿要求以及高吞吐）</strong></h3><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206221136932.png" alt="image-20220622113657867" loading="lazy"></p><ul><li>可以看到仅仅只有在初始标记中stw了。</li></ul><p>G1 (Garbage-First) 是一款面向服务器的垃圾收集器,主要针对配备多颗处理器及大容量内存的机器. 以极高概率满足 GC 停顿时间要求的同时,还具备高吞吐量性能特征。</p><p>被视为 JDK1.7 中 HotSpot 虚拟机的一个重要进化特征。它具备以下特点：</p><ul><li><strong>并行与并发</strong>：G1 能充分利用 CPU、多核环境下的硬件优势，使用多个 CPU（CPU 或者 CPU 核心）来缩短 Stop-The-World 停顿时间。部分其他收集器原本需要停顿 Java 线程执行的 GC 动作，G1 收集器仍然可以通过并发的方式让 java 程序继续执行。</li><li><strong>分代收集</strong>：虽然 G1 可以不需要其他收集器配合就能独立管理整个 GC 堆，但是还是保留了分代的概念。</li><li><strong>空间整合</strong>：与 CMS 的“标记-清理”算法不同，G1 从整体来看是基于“标记-整理”算法实现的收集器；从局部上来看是基于“标记-复制”算法实现的。</li><li><strong>可预测的停顿</strong>：这是 G1 相对于 CMS 的另一个大优势，降低停顿时间是 G1 和 CMS 共同的关注点，但 G1 除了追求低停顿外，还能建立可预测的停顿时间模型，能让使用者明确指定在一个长度为 M 毫秒的时间片段内。</li></ul><p>G1 收集器的运作大致分为以下几个步骤：</p><ul><li><strong>初始标记</strong></li><li><strong>并发标记</strong></li><li><strong>最终标记</strong></li><li><strong>筛选回收</strong></li></ul><p><strong>G1 收集器在后台维护了一个优先列表，每次根据允许的收集时间，优先选择回收价值最大的 Region(这也就是它的名字 Garbage-First 的由来)</strong> 。这种使用 Region 划分内存空间以及有优先级的区域回收方式，保证了 G1 收集器在有限时间内可以尽可能高的收集效率（把内存化整为零）。</p><blockquote><p>牛客</p></blockquote><p>G1收集器是一个<strong>多线程的采用标记清除算法的</strong>，面向混合收集（同时收集新生带和老年带）的一个垃圾收集器。</p><p>G1收集器将整个堆内存区域划分为多个大小相等的region，以region为单位进行垃圾收集并获取每个region的收集效率和收集收益，通过一张优先级表对其进行维护。同时每个region中维护了一个remember set用来存储该分区中的对象所引用的对象在其他分区的位置来避免在做可达性分析算法时全堆扫描。</p><p>G1垃圾收集器垃圾回收主要包括四个流程：</p><p>1：初始标记。</p><p>2：并发标记（类似于CMS）</p><p>3：最终标记在并发标记中维护了一个remember set log用来记录在该阶段发生变化的对象引用关系，在该阶段就是<strong>将该信息同步到最终标记信息中</strong>。</p><p>4：并发筛选回收：根据优先级表选择分区进行垃圾回收，用户线程不停顿。</p><h3 id="_7、zgc收集器-stw情况更少" tabindex="-1"><a class="header-anchor" href="#_7、zgc收集器-stw情况更少" aria-hidden="true">#</a> 7、ZGC收集器（STW情况更少）</h3><blockquote><p><a href="https://blog.csdn.net/qq_41931364/article/details/107040928" target="_blank" rel="noopener noreferrer">垃圾收集器G1和ZGC详解<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206221137726.png" alt="image-20220622113720663" loading="lazy"></p><p>与 CMS 中的 ParNew 和 G1 类似，ZGC 也采用<code>标记-复制</code>算法，不过 ZGC 对该算法做了重大改进。</p><p>在 ZGC 中出现 Stop The World 的情况会更少！</p><h2 id="_6、类加载器" tabindex="-1"><a class="header-anchor" href="#_6、类加载器" aria-hidden="true">#</a> 6、类加载器</h2><h3 id="_1、类的加载过程" tabindex="-1"><a class="header-anchor" href="#_1、类的加载过程" aria-hidden="true">#</a> 1、类的加载过程</h3><p>类的加载过程：加载 =&gt; 链接(验证-安全检查、准备-为static分配空间、解析) =&gt; 初始化</p><p>加载：将类的字节码加载到方法区中。引出JVM的内存结构-方法区</p><p>链接：首先进行验证字节码是否有问题，接着为static变量进行分配空间，最后将符号引用解析为直接引用(确切知道类、方法及属性在内存中位置)。</p><p>初始化：调用<code>&lt;cinit&gt;()V</code>方法，这个构造方法是线程安全的。</p><p>会初始化情况：方法静态变量(除final)、方法、Class.forName、new都会导致初始化(核心就是静态变量进行赋值操作)。</p><p>注意：loadClass不会导致类的解析与初始化。</p><h3 id="_2、双亲委派模型介绍" tabindex="-1"><a class="header-anchor" href="#_2、双亲委派模型介绍" aria-hidden="true">#</a> 2、双亲委派模型介绍</h3><p>每一个类都有一个对应它的类加载器。系统中的 ClassLoader 在协同工作的时候会默认使用 <strong>双亲委派模型</strong> 。即在类加载的时候，系统会首先判断当前类是否被加载过。已经被加载的类会直接返回，否则才会尝试加载。加载的时候，首先会把该请求委派给父类加载器的 <code>loadClass()</code> 处理，因此所有的请求最终都应该传送到顶层的启动类加载器 <code>BootstrapClassLoader</code> 中。当父类加载器无法处理时，才由自己来处理。当父类加载器为 null 时，会使用启动类加载器 <code>BootstrapClassLoader</code> 作为父类加载器。</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191708609.png" alt="image-20220619170842540" loading="lazy"></p><p>双亲委派模型的实现代码非常简单，逻辑非常清晰，都集中在 <code>java.lang.ClassLoader</code> 的 <code>loadClass()</code> 中，相关代码如下所示。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ClassLoader</span> parent<span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">boolean</span> resolve<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token function">getClassLoadingLock</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 首先，检查请求的类是否已经被加载过</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token function">findLoadedClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">long</span> t0 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//父加载器不为空，调用父加载器loadClass()方法处理</span>
                        c <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">//父加载器为空，使用启动类加载器 BootstrapClassLoader 加载</span>
                        c <span class="token operator">=</span> <span class="token function">findBootstrapClassOrNull</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token comment">//抛出异常说明父类加载器无法完成加载请求</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">long</span> t1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//自己尝试加载</span>
                    c <span class="token operator">=</span> <span class="token function">findClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">// this is the defining class loader; record the stats</span>
                    <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getParentDelegationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTime</span><span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getFindClassTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addElapsedTimeFrom</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getFindClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">resolveClass</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、双亲委派模型的好处" tabindex="-1"><a class="header-anchor" href="#_3、双亲委派模型的好处" aria-hidden="true">#</a> 3、双亲委派模型的好处</h3><p>双亲委派模型保证了 Java 程序的稳定运行，可以避免类的重复加载（JVM 区分不同类的方式不仅仅根据类名，相同的类文件被不同的类加载器加载产生的是两个不同的类），也保证了 Java 的核心 API 不被篡改。如果没有使用双亲委派模型，而是每个类加载器加载自己的话就会出现一些问题，比如我们编写一个称为 <code>java.lang.Object</code> 类的话，那么程序运行的时候，系统就会出现多个不同的 <code>Object</code> 类。</p><h3 id="_4、如果我们不想用双亲委派模型怎么办" tabindex="-1"><a class="header-anchor" href="#_4、如果我们不想用双亲委派模型怎么办" aria-hidden="true">#</a> 4、如果我们不想用双亲委派模型怎么办？</h3><p>自定义加载器的话，需要继承 <code>ClassLoader</code> 。如果我们不想打破双亲委派模型，就重写 <code>ClassLoader</code> 类中的 <code>findClass()</code> 方法即可，无法被父类加载器加载的类最终会通过这个方法被加载。但是，如果想打破双亲委派模型则需要重写 <code>loadClass()</code> 方法</p><h3 id="_5、自定义类加载器" tabindex="-1"><a class="header-anchor" href="#_5、自定义类加载器" aria-hidden="true">#</a> 5、自定义类加载器</h3><p>除了 <code>BootstrapClassLoader</code> 其他类加载器均由 Java 实现且全部继承自<code>java.lang.ClassLoader</code>。如果我们要自定义自己的类加载器，很明显需要继承 <code>ClassLoader</code>。</p><h3 id="_6、loadclass-、findclass-、defineclass-区别" tabindex="-1"><a class="header-anchor" href="#_6、loadclass-、findclass-、defineclass-区别" aria-hidden="true">#</a> 6、loadClass（）、findClass（）、defineClass（）区别</h3><blockquote><p><a href="https://www.jianshu.com/p/b75a89014e27" target="_blank" rel="noopener noreferrer">loadClass（）、findClass（）、defineClass（）区别<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>loadClass()：加载字节码，会走双亲委派机制，来去查找或加载指定的class类。</p><p>findClass()：真正对应类加载器去找class类方法。根据名称或位置加载.class字节码,然后使用defineClass。</p><p>defineClass(String name, byte[] b, int off, int len)：将字节码转为Class。</p><h3 id="_7、自己写的java-lang-string可以让jvm加载到吗" tabindex="-1"><a class="header-anchor" href="#_7、自己写的java-lang-string可以让jvm加载到吗" aria-hidden="true">#</a> 7、自己写的java.lang.String可以让jvm加载到吗？</h3><blockquote><p>参考文章：<a href="https://blog.csdn.net/weixin_27605509/article/details/115081886" target="_blank" rel="noopener noreferrer">java.lang.String_自己写的java.lang.String可以让jvm加载到吗？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://blog.csdn.net/qq_41854763/article/details/107891273?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-4.pc_relevant_default&amp;spm=1001.2101.3001.4242.3&amp;utm_relevant_index=7" target="_blank" rel="noopener noreferrer">深入理解JVM之加载自己的String类<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><blockquote><p>结论</p></blockquote><p>结论</p><p>1、无论何种自定义类加载器，最终都会调用<code>ClassLoader.defineClass</code>。</p><p>2、<code>ClassLoader.defineClass</code>中会检查类名，类名以<code>java.</code>开头的，不予加载。</p><p>3、<strong>我们可以加载自己的String类，但无法加载自己的java.lang.String类</strong>。</p><ul><li>虽然我们可以破坏双亲委派模型，但<strong>JVM规定了以java.开头的类必须由BootstrapClassLoader加载</strong>！所以我们无法加载自己的java.lang.String类</li></ul><p>4、代码实现中为了区分自定义的String和java.lang.String，所有用到java.lang.String的地方均<strong>采用全限定名表示</strong>。</p><blockquote><p>测试</p></blockquote><p>话不多说我们来自己尝试一下：</p><p>首先自定义一个java.lang.String类</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/3/202204191150004.png" alt="image-20220419115000971" loading="lazy"></p><p>接着我们尝试去自定义类加载器重新findClass方法让其不走双亲委派机制，通过去读取对应class文件为字节数组后使用defineClass来讲字节数组转为一个Class类：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 若是想要自己直接加载自定义的class类，那么可以通过自己实现ClassLoader的findClass方法来直接加载class文件，绕过双亲委派机制
 */</span>
<span class="token keyword">class</span> <span class="token class-name">MyClassLoader</span> <span class="token keyword">extends</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> pathName <span class="token operator">=</span> <span class="token string">&quot;E:\\自学历程\\Gitee仓库\\demo-exer\\java-learn\\out\\production\\java-jvm\\com\\changlu\\自定义类加载器\\&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> packageName <span class="token operator">=</span> <span class="token string">&quot;com.changlu.自定义类加载器.&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyClassLoader</span><span class="token punctuation">(</span><span class="token class-name">String</span> pathName<span class="token punctuation">,</span> <span class="token class-name">String</span> packageName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pathName <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> packageName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>pathName <span class="token operator">=</span> pathName<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>packageName <span class="token operator">=</span> packageName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">findClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token comment">//getResource(&quot;&quot;)是获取到当前输出out及完整包路径</span>
<span class="token comment">//        String fileName = MyClassLoader.class.getResource(&quot;&quot;).getPath().substring(1) + name + &quot;.class&quot;;</span>
        <span class="token comment">//这里通过绝对路径来进行表示</span>
        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pathName <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;.class&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ByteArrayOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">,</span> bos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> bos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//若是class类中有包名，那么这里就需要自己来进行指定</span>
        <span class="token keyword">return</span> <span class="token function">defineClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>packageName <span class="token operator">+</span> name<span class="token punctuation">,</span> bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时并不会进行类的初始化</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时我们来尝试去通过自引导区加载Class类：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//测试当前java.lang包下的String</span>
        <span class="token keyword">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> string <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClassLoader</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\自学历程\\Gitee仓库\\demo-exer\\java-learn\\out\\production\\java-jvm\\java\\lang\\&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;java.lang.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findClass</span><span class="token punctuation">(</span><span class="token string">&quot;String&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终结果：</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/3/202204191156402.png" alt="image-20220419115643363" loading="lazy"></p><p>原因：因为我们想要加载类最终还是要通过defineClass，那么其中就会有检查操作，一旦class包名中有java.那么就会抛出异常</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/3/202204191157645.png" alt="image-20220419115728566" loading="lazy"></p><hr><h2 id="_7、最重要的jvm参数总结" tabindex="-1"><a class="header-anchor" href="#_7、最重要的jvm参数总结" aria-hidden="true">#</a> 7、最重要的jvm参数总结</h2><blockquote><p>堆分配</p></blockquote><p>堆空间分配：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># xms最小堆  xmx最大堆  heap size 表示要初始化内存的具体大小。unit 表示要初始化内存的单位。单位为***“ g”*** (GB) 、“ m”（MB）、“ k”（KB）</span>
-Xms<span class="token operator">&lt;</span>heap size<span class="token operator">&gt;</span><span class="token punctuation">[</span>unit<span class="token punctuation">]</span> 
-Xmx<span class="token operator">&lt;</span>heap size<span class="token operator">&gt;</span><span class="token punctuation">[</span>unit<span class="token punctuation">]</span>

<span class="token comment"># 示例：JVM分配最小2 GB和最大5 GB的堆内存大小</span>
-Xms2G -Xmx5G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新生代内存(Young Ceneration)大小：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 最小新生代以及最大</span>
-XX:NewSize<span class="token operator">=</span><span class="token operator">&lt;</span>young size<span class="token operator">&gt;</span><span class="token punctuation">[</span>unit<span class="token punctuation">]</span> 
-XX:MaxNewSize<span class="token operator">=</span><span class="token operator">&lt;</span>young size<span class="token operator">&gt;</span><span class="token punctuation">[</span>unit<span class="token punctuation">]</span>

<span class="token comment"># 示例1：新生代分配 最小256m 的内存，最大 1024m的内存</span>
-XX:NewSize<span class="token operator">=</span>256m
-XX:MaxNewSize<span class="token operator">=</span>1024m

<span class="token comment"># 示例2：新生代分配256m的内存（NewSize与MaxNewSize设为一致）</span>
-Xmn256m 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新生代、老生代的内存比值：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 示范</span>
-XX:NewRatio<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">&gt;</span>

<span class="token comment"># 示例：新生代与老年代所占比值为1：1，新生代占整个堆栈的 1/2。</span>
-XX:NewRatio<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>永久代、元空间</p></blockquote><p>显式指定永久代/元空间的大小：</p><p>JDK 1.8 之前永久代还没被彻底移除的时候通常通过下面这些参数来调节方法区大小</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 方法区 (永久代) 初始大小</span>
-XX:PermSize<span class="token operator">=</span>N 
<span class="token comment"># 方法区 (永久代) 最大大小,超过这个值将会抛出 OutOfMemoryError 异常:java.lang.OutOfMemoryError: PermGen</span>
-XX:MaxPermSize<span class="token operator">=</span>N
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JDK 1.8 的时候，方法区（HotSpot 的永久代）被彻底移除了（JDK1.7 就已经开始了），取而代之是元空间，元空间使用的是本地内存。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 置 Metaspace 的初始（和最小大小）</span>
-XX:MetaspaceSize<span class="token operator">=</span>N
<span class="token comment"># 设置 Metaspace 的最大大小，如果不指定大小的话，随着更多类的创建，虚拟机会耗尽所有可用的系统内存。</span>
-XX:MaxMetaspaceSize<span class="token operator">=</span>N
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>垃圾回收器</p></blockquote><p>JVM具有四种类型的<em>GC</em>实现：</p><ul><li>串行垃圾收集器</li><li>并行垃圾收集器</li><li>CMS垃圾收集器</li><li>G1垃圾收集器</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-XX:+UseSerialGC
-XX:+UseParallelGC
-XX:+UseParNewGC
-XX:+UseG1GC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>监控GC记录</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-XX:+UseGCLogFileRotation 
-XX:NumberOfGCLogFiles<span class="token operator">=</span><span class="token operator">&lt;</span> number of log files <span class="token operator">&gt;</span> 
-XX:GCLogFileSize<span class="token operator">=</span><span class="token operator">&lt;</span> <span class="token function">file</span> size <span class="token operator">&gt;</span><span class="token punctuation">[</span> unit <span class="token punctuation">]</span>
-Xloggc:/path/to/gc.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8、jdk监测以及故障处理工具" tabindex="-1"><a class="header-anchor" href="#_8、jdk监测以及故障处理工具" aria-hidden="true">#</a> 8、JDK监测以及故障处理工具</h2><blockquote><p>命令行工具</p></blockquote><ul><li><strong><code>jps</code></strong> (JVM Process Status）: 类似 UNIX 的 <code>ps</code> 命令。用于查看所有 Java 进程的启动类、传入参数和 Java 虚拟机参数等信息；</li><li><strong><code>jstat</code></strong>（JVM Statistics Monitoring Tool）: 用于收集 HotSpot 虚拟机各方面的运行数据;</li><li><strong><code>jinfo</code></strong> (Configuration Info for Java) : Configuration Info for Java,显示虚拟机配置信息;</li><li><strong><code>jmap</code></strong> (Memory Map for Java) : 生成堆转储快照;</li><li><strong><code>jhat</code></strong> (JVM Heap Dump Browser) : 用于分析 heapdump 文件，它会建立一个 HTTP/HTML 服务器，让用户可以在浏览器上查看分析结果;</li><li><strong><code>jstack</code></strong> (Stack Trace for Java) : 生成虚拟机当前时刻的线程快照，线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合。</li></ul><blockquote><p>可视化分析工具</p></blockquote><p>JConsole：Java 监视与管理控制台</p><p>Visual VM：多合一故障处理工具，目前为止随 JDK 发布的功能最强大的运行监视和故障处理程序。</p><hr><p>整理者：长路 时间：2022.6.19</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/changluJava/personal-reading/edit/main/demo/src/zh/interview/JVM.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/zh/interview/JUC.html" class="nav-link prev" aria-label="JUC"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><span class="icon iconfont icon-lock" style=""></span>JUC</div></a><a href="/zh/interview/Linux.html" class="nav-link next" aria-label="Linux"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">Linux<span class="icon iconfont icon-lock" style=""></span></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">默认页脚</div><div class="copyright">Copyright © 2022 长路</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.70f4e18b.js" defer></script>
  </body>
</html>
