<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/zh/interview/NIO%E4%B8%8ENetty.html"><meta property="og:site_name" content="ä¸»é¢˜æ¼”ç¤º"><meta property="og:title" content="Netty"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="Nioä¸Netty"><title>Netty | ä¸»é¢˜æ¼”ç¤º</title><meta name="description" content="vuepress-theme-hope çš„æ¼”ç¤º">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.dbbe025d.css">
    <link rel="modulepreload" href="/assets/app.70f4e18b.js"><link rel="modulepreload" href="/assets/NIOä¸Netty.html.32423e80.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/NIOä¸Netty.html.a73529b1.js"><link rel="prefetch" href="/assets/home.html.d675c4b6.js"><link rel="prefetch" href="/assets/intro.html.684ef626.js"><link rel="prefetch" href="/assets/index.html.e8ffec66.js"><link rel="prefetch" href="/assets/slide.html.050a6f1e.js"><link rel="prefetch" href="/assets/disable.html.b507ecac.js"><link rel="prefetch" href="/assets/encrypt.html.762116d5.js"><link rel="prefetch" href="/assets/markdown.html.5acf7a9a.js"><link rel="prefetch" href="/assets/page.html.141b0147.js"><link rel="prefetch" href="/assets/index.html.75bf4c69.js"><link rel="prefetch" href="/assets/home.html.6e361c52.js"><link rel="prefetch" href="/assets/index.html.2d9b62a7.js"><link rel="prefetch" href="/assets/slide.html.6b655fa0.js"><link rel="prefetch" href="/assets/article10.html.f5ea4d77.js"><link rel="prefetch" href="/assets/article11.html.6339c214.js"><link rel="prefetch" href="/assets/article12.html.5ac86a8f.js"><link rel="prefetch" href="/assets/article9.html.666c37a0.js"><link rel="prefetch" href="/assets/Docker.html.de1063e8.js"><link rel="prefetch" href="/assets/JavaåŸºç¡€.html.6c0b0f5c.js"><link rel="prefetch" href="/assets/Javaå®¹å™¨.html.77448ff5.js"><link rel="prefetch" href="/assets/JUC.html.76307785.js"><link rel="prefetch" href="/assets/JVM.html.0bb340ff.js"><link rel="prefetch" href="/assets/Linux.html.90ea1c3b.js"><link rel="prefetch" href="/assets/MySQL.html.73ae62bf.js"><link rel="prefetch" href="/assets/index.html.2a38d188.js"><link rel="prefetch" href="/assets/Redis.html.78427b11.js"><link rel="prefetch" href="/assets/ä¸»æµæ¡†æ¶.html.f21f66df.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼ä¸é«˜æ€§èƒ½é«˜å¯ç”¨.html.38ab4746.js"><link rel="prefetch" href="/assets/æ“ä½œç³»ç»Ÿ.html.76b600e3.js"><link rel="prefetch" href="/assets/æ™ºåŠ›é¢˜.html.ec368cec.js"><link rel="prefetch" href="/assets/ç³»ç»Ÿè®¾è®¡.html.fb8f2074.js"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œ.html.1a7f7d0e.js"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼.html.cd48ccf5.js"><link rel="prefetch" href="/assets/disable.html.f629efab.js"><link rel="prefetch" href="/assets/encrypt.html.58d61689.js"><link rel="prefetch" href="/assets/markdown.html.779c42bf.js"><link rel="prefetch" href="/assets/page.html.125d74f5.js"><link rel="prefetch" href="/assets/index.html.3db704fb.js"><link rel="prefetch" href="/assets/article10.html.b5d65d2d.js"><link rel="prefetch" href="/assets/article11.html.b2cf93ee.js"><link rel="prefetch" href="/assets/article12.html.94e1cf22.js"><link rel="prefetch" href="/assets/article9.html.90cf2a62.js"><link rel="prefetch" href="/assets/article1.html.f835efef.js"><link rel="prefetch" href="/assets/article2.html.e4775195.js"><link rel="prefetch" href="/assets/article3.html.bfdf934f.js"><link rel="prefetch" href="/assets/article4.html.69bccee4.js"><link rel="prefetch" href="/assets/article5.html.c7ac5439.js"><link rel="prefetch" href="/assets/article6.html.880c0652.js"><link rel="prefetch" href="/assets/article7.html.2cae84db.js"><link rel="prefetch" href="/assets/article8.html.6c46837c.js"><link rel="prefetch" href="/assets/article1.html.ca54de60.js"><link rel="prefetch" href="/assets/article2.html.a99d479f.js"><link rel="prefetch" href="/assets/article3.html.5a2797ee.js"><link rel="prefetch" href="/assets/article4.html.3ac5a509.js"><link rel="prefetch" href="/assets/article5.html.c09d20ba.js"><link rel="prefetch" href="/assets/article6.html.c9e59f52.js"><link rel="prefetch" href="/assets/article7.html.948e77cc.js"><link rel="prefetch" href="/assets/article8.html.28c3977f.js"><link rel="prefetch" href="/assets/404.html.8a909211.js"><link rel="prefetch" href="/assets/index.html.690b188a.js"><link rel="prefetch" href="/assets/index.html.6085d793.js"><link rel="prefetch" href="/assets/index.html.932078ca.js"><link rel="prefetch" href="/assets/index.html.bb629f30.js"><link rel="prefetch" href="/assets/index.html.92b2d70c.js"><link rel="prefetch" href="/assets/index.html.82840baf.js"><link rel="prefetch" href="/assets/index.html.85406aa8.js"><link rel="prefetch" href="/assets/index.html.7b9124b8.js"><link rel="prefetch" href="/assets/index.html.e1e2a548.js"><link rel="prefetch" href="/assets/index.html.a9a69593.js"><link rel="prefetch" href="/assets/index.html.5b51b72b.js"><link rel="prefetch" href="/assets/index.html.ec7f0295.js"><link rel="prefetch" href="/assets/index.html.e14e2286.js"><link rel="prefetch" href="/assets/index.html.e89216be.js"><link rel="prefetch" href="/assets/index.html.c0adb933.js"><link rel="prefetch" href="/assets/index.html.a45798a3.js"><link rel="prefetch" href="/assets/index.html.e99c516b.js"><link rel="prefetch" href="/assets/index.html.f6be7fb4.js"><link rel="prefetch" href="/assets/index.html.6812b391.js"><link rel="prefetch" href="/assets/index.html.4bae905e.js"><link rel="prefetch" href="/assets/index.html.dfdff039.js"><link rel="prefetch" href="/assets/index.html.963b2596.js"><link rel="prefetch" href="/assets/index.html.bbd9778f.js"><link rel="prefetch" href="/assets/index.html.c6a7a8d4.js"><link rel="prefetch" href="/assets/index.html.0599248b.js"><link rel="prefetch" href="/assets/index.html.4b0a0f3f.js"><link rel="prefetch" href="/assets/index.html.13391f8f.js"><link rel="prefetch" href="/assets/index.html.9a4d8710.js"><link rel="prefetch" href="/assets/index.html.bbd06d0d.js"><link rel="prefetch" href="/assets/index.html.ae769b93.js"><link rel="prefetch" href="/assets/index.html.59a75e1b.js"><link rel="prefetch" href="/assets/index.html.efb1d101.js"><link rel="prefetch" href="/assets/index.html.898df6f8.js"><link rel="prefetch" href="/assets/index.html.6339ac7f.js"><link rel="prefetch" href="/assets/index.html.0ffdd311.js"><link rel="prefetch" href="/assets/index.html.454f52cf.js"><link rel="prefetch" href="/assets/index.html.d8a5ddde.js"><link rel="prefetch" href="/assets/index.html.3be06723.js"><link rel="prefetch" href="/assets/index.html.1d180388.js"><link rel="prefetch" href="/assets/index.html.337241b0.js"><link rel="prefetch" href="/assets/index.html.0be3cd3f.js"><link rel="prefetch" href="/assets/index.html.8e5505d4.js"><link rel="prefetch" href="/assets/index.html.ffdd1452.js"><link rel="prefetch" href="/assets/index.html.d3825f4c.js"><link rel="prefetch" href="/assets/index.html.cd21ad11.js"><link rel="prefetch" href="/assets/index.html.72b3c545.js"><link rel="prefetch" href="/assets/index.html.0262e65d.js"><link rel="prefetch" href="/assets/index.html.8905ca40.js"><link rel="prefetch" href="/assets/index.html.98e54f53.js"><link rel="prefetch" href="/assets/index.html.707c5120.js"><link rel="prefetch" href="/assets/index.html.daf3ede2.js"><link rel="prefetch" href="/assets/home.html.25d3c8da.js"><link rel="prefetch" href="/assets/intro.html.31cc697b.js"><link rel="prefetch" href="/assets/index.html.aa528a4f.js"><link rel="prefetch" href="/assets/slide.html.9ed3a471.js"><link rel="prefetch" href="/assets/disable.html.62512da2.js"><link rel="prefetch" href="/assets/encrypt.html.0d034a15.js"><link rel="prefetch" href="/assets/markdown.html.c1428989.js"><link rel="prefetch" href="/assets/page.html.16d63ffa.js"><link rel="prefetch" href="/assets/index.html.df6b399b.js"><link rel="prefetch" href="/assets/home.html.8779cc04.js"><link rel="prefetch" href="/assets/index.html.f058b37e.js"><link rel="prefetch" href="/assets/slide.html.948fa994.js"><link rel="prefetch" href="/assets/article10.html.f30a487d.js"><link rel="prefetch" href="/assets/article11.html.aa11dbec.js"><link rel="prefetch" href="/assets/article12.html.d29e528f.js"><link rel="prefetch" href="/assets/article9.html.85432915.js"><link rel="prefetch" href="/assets/Docker.html.3af5e19d.js"><link rel="prefetch" href="/assets/JavaåŸºç¡€.html.11b2eaaa.js"><link rel="prefetch" href="/assets/Javaå®¹å™¨.html.ff8441bb.js"><link rel="prefetch" href="/assets/JUC.html.1e3b5a69.js"><link rel="prefetch" href="/assets/JVM.html.8514654f.js"><link rel="prefetch" href="/assets/Linux.html.150f926b.js"><link rel="prefetch" href="/assets/MySQL.html.08bb1172.js"><link rel="prefetch" href="/assets/index.html.0b3d8610.js"><link rel="prefetch" href="/assets/Redis.html.0c37a51f.js"><link rel="prefetch" href="/assets/ä¸»æµæ¡†æ¶.html.69fd181a.js"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼ä¸é«˜æ€§èƒ½é«˜å¯ç”¨.html.8274b7f9.js"><link rel="prefetch" href="/assets/æ“ä½œç³»ç»Ÿ.html.5bd82cae.js"><link rel="prefetch" href="/assets/æ™ºåŠ›é¢˜.html.56d391f1.js"><link rel="prefetch" href="/assets/ç³»ç»Ÿè®¾è®¡.html.45935af4.js"><link rel="prefetch" href="/assets/è®¡ç®—æœºç½‘ç»œ.html.4ee8249b.js"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼.html.3fd42acf.js"><link rel="prefetch" href="/assets/disable.html.61255a23.js"><link rel="prefetch" href="/assets/encrypt.html.e8d21430.js"><link rel="prefetch" href="/assets/markdown.html.aeb94762.js"><link rel="prefetch" href="/assets/page.html.8e41e2f1.js"><link rel="prefetch" href="/assets/index.html.bb62d8a8.js"><link rel="prefetch" href="/assets/article10.html.2a946719.js"><link rel="prefetch" href="/assets/article11.html.a6c9915a.js"><link rel="prefetch" href="/assets/article12.html.8a223ed6.js"><link rel="prefetch" href="/assets/article9.html.c19afa12.js"><link rel="prefetch" href="/assets/article1.html.e2467b26.js"><link rel="prefetch" href="/assets/article2.html.ca7165d9.js"><link rel="prefetch" href="/assets/article3.html.4ad8551a.js"><link rel="prefetch" href="/assets/article4.html.8cf1226d.js"><link rel="prefetch" href="/assets/article5.html.c0566821.js"><link rel="prefetch" href="/assets/article6.html.fdc68865.js"><link rel="prefetch" href="/assets/article7.html.1d1cf676.js"><link rel="prefetch" href="/assets/article8.html.a5a90998.js"><link rel="prefetch" href="/assets/article1.html.c2199afd.js"><link rel="prefetch" href="/assets/article2.html.19ecf916.js"><link rel="prefetch" href="/assets/article3.html.f3d4cbea.js"><link rel="prefetch" href="/assets/article4.html.c1abea03.js"><link rel="prefetch" href="/assets/article5.html.5cdcfb65.js"><link rel="prefetch" href="/assets/article6.html.46ae2434.js"><link rel="prefetch" href="/assets/article7.html.b8dd70e2.js"><link rel="prefetch" href="/assets/article8.html.ac9ba891.js"><link rel="prefetch" href="/assets/404.html.8a78f857.js"><link rel="prefetch" href="/assets/index.html.c32aaa47.js"><link rel="prefetch" href="/assets/index.html.fa731973.js"><link rel="prefetch" href="/assets/index.html.a226559d.js"><link rel="prefetch" href="/assets/index.html.660bd084.js"><link rel="prefetch" href="/assets/index.html.9e77ca7e.js"><link rel="prefetch" href="/assets/index.html.2f66225a.js"><link rel="prefetch" href="/assets/index.html.a81947db.js"><link rel="prefetch" href="/assets/index.html.602ea4a3.js"><link rel="prefetch" href="/assets/index.html.18cb4d0a.js"><link rel="prefetch" href="/assets/index.html.bea585fa.js"><link rel="prefetch" href="/assets/index.html.16067c99.js"><link rel="prefetch" href="/assets/index.html.cd3a1424.js"><link rel="prefetch" href="/assets/index.html.0257170d.js"><link rel="prefetch" href="/assets/index.html.386f764f.js"><link rel="prefetch" href="/assets/index.html.f655ddbd.js"><link rel="prefetch" href="/assets/index.html.77a93188.js"><link rel="prefetch" href="/assets/index.html.907db0e7.js"><link rel="prefetch" href="/assets/index.html.7b26fcf2.js"><link rel="prefetch" href="/assets/index.html.fef9f6fc.js"><link rel="prefetch" href="/assets/index.html.90ca836c.js"><link rel="prefetch" href="/assets/index.html.da8e3d16.js"><link rel="prefetch" href="/assets/index.html.58cd58ab.js"><link rel="prefetch" href="/assets/index.html.c62cb74c.js"><link rel="prefetch" href="/assets/index.html.35f315df.js"><link rel="prefetch" href="/assets/index.html.241c1593.js"><link rel="prefetch" href="/assets/index.html.4ccf06b7.js"><link rel="prefetch" href="/assets/index.html.f93a9291.js"><link rel="prefetch" href="/assets/index.html.0cf4e90d.js"><link rel="prefetch" href="/assets/index.html.b8dba199.js"><link rel="prefetch" href="/assets/index.html.c9b68406.js"><link rel="prefetch" href="/assets/index.html.0cf084fe.js"><link rel="prefetch" href="/assets/index.html.a0cddae9.js"><link rel="prefetch" href="/assets/index.html.aaf1c09e.js"><link rel="prefetch" href="/assets/index.html.a9d3f092.js"><link rel="prefetch" href="/assets/index.html.73ed18db.js"><link rel="prefetch" href="/assets/index.html.5821ab5d.js"><link rel="prefetch" href="/assets/index.html.9921cdaa.js"><link rel="prefetch" href="/assets/index.html.61c31811.js"><link rel="prefetch" href="/assets/index.html.9658bfb2.js"><link rel="prefetch" href="/assets/index.html.e8e73c1e.js"><link rel="prefetch" href="/assets/index.html.cdaf3c37.js"><link rel="prefetch" href="/assets/index.html.fc13e58d.js"><link rel="prefetch" href="/assets/index.html.0171af6e.js"><link rel="prefetch" href="/assets/index.html.e20025f9.js"><link rel="prefetch" href="/assets/index.html.6ca40dd2.js"><link rel="prefetch" href="/assets/index.html.9ca3b3ac.js"><link rel="prefetch" href="/assets/index.html.84da5923.js"><link rel="prefetch" href="/assets/index.html.2b598a4c.js"><link rel="prefetch" href="/assets/index.html.3afe3f75.js"><link rel="prefetch" href="/assets/index.html.9c0ee66c.js"><link rel="prefetch" href="/assets/index.html.b3a794ff.js"><link rel="prefetch" href="/assets/404.4c9af2ec.js"><link rel="prefetch" href="/assets/Layout.5b24db7e.js"><link rel="prefetch" href="/assets/Slide.93b16e8f.js"><link rel="prefetch" href="/assets/Blog.c190763a.js"><link rel="prefetch" href="/assets/giscus.es.63137db5.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.daae04bf.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.ee1e0284.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.092fbc15.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/zh/" class="brand"><img class="logo" src="/logo.svg" alt="ä¸»é¢˜æ¼”ç¤º"><!----><span class="site-name hide-in-pad">ä¸»é¢˜æ¼”ç¤º</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/zh/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/home.html" class="nav-link" aria-label="é¡¹ç›®ä¸»é¡µ"><span class="icon iconfont icon-home" style=""></span>é¡¹ç›®ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/guide/" class="nav-link" aria-label="ä½¿ç”¨æŒ‡å—"><span class="icon iconfont icon-creative" style=""></span>ä½¿ç”¨æŒ‡å—<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åšæ–‡"><span class="title"><span class="icon iconfont icon-edit" style=""></span>åšæ–‡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ–‡ç«  1-4</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article1.html" class="nav-link" aria-label="æ–‡ç«  1"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  1<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article2.html" class="nav-link" aria-label="æ–‡ç«  2"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  2<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article3.html" class="nav-link" aria-label="æ–‡ç«  3"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  3<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article4.html" class="nav-link" aria-label="æ–‡ç«  4"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  4<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ–‡ç«  5-12</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article5.html" class="nav-link" aria-label="æ–‡ç«  5"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  5<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article6.html" class="nav-link" aria-label="æ–‡ç«  6"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  6<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article7.html" class="nav-link" aria-label="æ–‡ç«  7"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  7<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article8.html" class="nav-link" aria-label="æ–‡ç«  8"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  8<!----></a></li></ul></li><li class="dropdown-item"><a href="/zh/posts/article9.html" class="nav-link" aria-label="æ–‡ç«  9"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  9<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article10.html" class="nav-link" aria-label="æ–‡ç«  10"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  10<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article11.html" class="nav-link" aria-label="æ–‡ç«  11"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  11<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article12.html" class="nav-link" aria-label="æ–‡ç«  12"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  12<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="ä¸»é¢˜æ–‡æ¡£" class="nav-link"><span class="icon iconfont icon-note" style=""></span>ä¸»é¢˜æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/" class="nav-link" aria-label="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html" class="router-link-active router-link-exact-active nav-link active" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://gitee.com/changluJava/personal-reading" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zh/" class="nav-link sidebar-link sidebar-page" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/home.html" class="nav-link sidebar-link sidebar-page" aria-label="é¡¹ç›®ä¸»é¡µ"><span class="icon iconfont icon-home" style=""></span>é¡¹ç›®ä¸»é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/slide" class="nav-link sidebar-link sidebar-page" aria-label="å¹»ç¯ç‰‡"><!---->å¹»ç¯ç‰‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-creative" style=""></span><a href="/zh/interview/" class="title">é¢è¯•æŒ‡å—</a><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/zh/interview/Docker.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker"><span class="icon iconfont icon-lock" style=""></span>Docker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/Java%E5%9F%BA%E7%A1%80.html" class="nav-link sidebar-link sidebar-page" aria-label="JAVA"><span class="icon iconfont icon-lock" style=""></span>JAVA<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/Java%E5%AE%B9%E5%99%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="Javaå®¹å™¨"><span class="icon iconfont icon-lock" style=""></span>Javaå®¹å™¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/JUC.html" class="nav-link sidebar-link sidebar-page" aria-label="JUC"><span class="icon iconfont icon-lock" style=""></span>JUC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/JVM.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM"><span class="icon iconfont icon-lock" style=""></span>JVM<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/Linux.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux"><span class="icon iconfont icon-lock" style=""></span>Linux<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/MySQL.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL"><span class="icon iconfont icon-lock" style=""></span>MySQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Netty"><span class="icon iconfont icon-lock" style=""></span>Netty<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_1ã€bio-nio-å’Œ-aio-æœ‰å•¥åŒºåˆ«" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ã€BIO,NIO å’Œ AIO æœ‰å•¥åŒºåˆ«ï¼Ÿ"><!---->1ã€BIO,NIO å’Œ AIO æœ‰å•¥åŒºåˆ«ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_2ã€netty-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2ã€Netty æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->2ã€Netty æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨-nio-å‘¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨ NIO å‘¢?"><!---->3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨ NIO å‘¢?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_4ã€ä¸ºä»€ä¹ˆè¦ç”¨-netty" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4ã€ä¸ºä»€ä¹ˆè¦ç”¨ Nettyï¼Ÿ"><!---->4ã€ä¸ºä»€ä¹ˆè¦ç”¨ Nettyï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_5ã€netty-åº”ç”¨åœºæ™¯äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5ã€Netty åº”ç”¨åœºæ™¯äº†è§£ä¹ˆï¼Ÿ"><!---->5ã€Netty åº”ç”¨åœºæ™¯äº†è§£ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº†-netty" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº† Netty?"><!---->6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº† Netty?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_7ã€ä»‹ç»ä¸€ä¸‹-netty-çš„æ ¸å¿ƒç»„ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7ã€ä»‹ç»ä¸€ä¸‹ Netty çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ"><!---->7ã€ä»‹ç»ä¸€ä¸‹ Netty çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_1ã€bytebuf-å­—èŠ‚å®¹å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ã€Bytebufï¼ˆå­—èŠ‚å®¹å™¨ï¼‰"><!---->1ã€Bytebufï¼ˆå­—èŠ‚å®¹å™¨ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_2ã€bootstrap-å’Œ-serverbootstrap-å¯åŠ¨å¼•å¯¼ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2ã€Bootstrap å’Œ ServerBootstrapï¼ˆå¯åŠ¨å¼•å¯¼ç±»ï¼‰"><!---->2ã€Bootstrap å’Œ ServerBootstrapï¼ˆå¯åŠ¨å¼•å¯¼ç±»ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_3ã€channel-ç½‘ç»œæ“ä½œæŠ½è±¡ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3ã€Channelï¼ˆç½‘ç»œæ“ä½œæŠ½è±¡ç±»ï¼‰"><!---->3ã€Channelï¼ˆç½‘ç»œæ“ä½œæŠ½è±¡ç±»ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_4ã€eventloop-äº‹ä»¶å¾ªç¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4ã€EventLoopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰"><!---->4ã€EventLoopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_5ã€channelhandler-æ¶ˆæ¯å¤„ç†å™¨-å’Œ-channelpipeline-channelhandler-å¯¹è±¡é“¾è¡¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5ã€ChannelHandlerï¼ˆæ¶ˆæ¯å¤„ç†å™¨ï¼‰ å’Œ ChannelPipelineï¼ˆChannelHandler å¯¹è±¡é“¾è¡¨ï¼‰"><!---->5ã€ChannelHandlerï¼ˆæ¶ˆæ¯å¤„ç†å™¨ï¼‰ å’Œ ChannelPipelineï¼ˆChannelHandler å¯¹è±¡é“¾è¡¨ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_6ã€channelfuture-æ“ä½œæ‰§è¡Œç»“æœ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6ã€ChannelFutureï¼ˆæ“ä½œæ‰§è¡Œç»“æœï¼‰"><!---->6ã€ChannelFutureï¼ˆæ“ä½œæ‰§è¡Œç»“æœï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_8ã€nioeventloopgroup-é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8ã€NioEventLoopGroup é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹ï¼Ÿ"><!---->8ã€NioEventLoopGroup é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_9ã€reactor-çº¿ç¨‹æ¨¡å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9ã€Reactor çº¿ç¨‹æ¨¡å‹"><!---->9ã€Reactor çº¿ç¨‹æ¨¡å‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_10ã€netty-çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10ã€Netty çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆï¼Ÿ"><!---->10ã€Netty çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_11ã€netty-æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11ã€Netty æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆï¼Ÿ"><!---->11ã€Netty æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_12ã€ä»€ä¹ˆæ˜¯-tcp-ç²˜åŒ…-æ‹†åŒ…-æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12ã€ä»€ä¹ˆæ˜¯ TCP ç²˜åŒ…/æ‹†åŒ…?æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢ï¼Ÿ"><!---->12ã€ä»€ä¹ˆæ˜¯ TCP ç²˜åŒ…/æ‹†åŒ…?æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢ï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_13ã€netty-é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13ã€Netty é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆï¼Ÿ"><!---->13ã€Netty é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_14ã€netty-çš„é›¶æ‹·è´äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14ã€Netty çš„é›¶æ‹·è´äº†è§£ä¹ˆï¼Ÿ"><!---->14ã€Netty çš„é›¶æ‹·è´äº†è§£ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/interview/Redis.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis"><span class="icon iconfont icon-lock" style=""></span>Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E4%B8%BB%E6%B5%81%E6%A1%86%E6%9E%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="ä¸»æµæ¡†æ¶"><span class="icon iconfont icon-lock" style=""></span>ä¸»æµæ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E9%AB%98%E6%80%A7%E8%83%BD%E9%AB%98%E5%8F%AF%E7%94%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ†å¸ƒå¼"><span class="icon iconfont icon-lock" style=""></span>åˆ†å¸ƒå¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" class="nav-link sidebar-link sidebar-page" aria-label="æ“ä½œç³»ç»Ÿ"><span class="icon iconfont icon-lock" style=""></span>æ“ä½œç³»ç»Ÿ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E6%99%BA%E5%8A%9B%E9%A2%98.html" class="nav-link sidebar-link sidebar-page" aria-label="æ™ºåŠ›é¢˜"><span class="icon iconfont icon-lock" style=""></span>æ™ºåŠ›é¢˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1.html" class="nav-link sidebar-link sidebar-page" aria-label="ç³»ç»Ÿè®¾è®¡"><span class="icon iconfont icon-lock" style=""></span>ç³»ç»Ÿè®¾è®¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¡ç®—æœºç½‘ç»œ"><span class="icon iconfont icon-lock" style=""></span>è®¡ç®—æœºç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/interview/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="icon iconfont icon-creative" style=""></span><a href="/zh/guide/" class="title">å¦‚ä½•ä½¿ç”¨</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/zh/guide/page.html" class="nav-link sidebar-link sidebar-page" aria-label="é¡µé¢é…ç½®"><span class="icon iconfont icon-page" style=""></span>é¡µé¢é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/markdown.html" class="nav-link sidebar-link sidebar-page" aria-label="Markdown å±•ç¤º"><span class="icon iconfont icon-markdown" style=""></span>Markdown å±•ç¤º<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/disable.html" class="nav-link sidebar-link sidebar-page" aria-label="å¸ƒå±€ä¸åŠŸèƒ½ç¦ç”¨"><span class="icon iconfont icon-config" style=""></span>å¸ƒå±€ä¸åŠŸèƒ½ç¦ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/encrypt.html" class="nav-link sidebar-link sidebar-page" aria-label="å¯†ç åŠ å¯†çš„æ–‡ç« "><span class="icon iconfont icon-lock" style=""></span>å¯†ç åŠ å¯†çš„æ–‡ç« <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">æ–‡ç« </span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note" style=""></span><span class="title">æ–‡ç«  1-4</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">æ–‡ç«  5-12</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note" style=""></span><span class="title">æ–‡ç«  5-8</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">æ–‡ç«  9-12</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/article9.html" class="nav-link sidebar-link sidebar-page" aria-label="æ–‡ç«  9"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  9<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article10.html" class="nav-link sidebar-link sidebar-page" aria-label="æ–‡ç«  10"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  10<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article11.html" class="nav-link sidebar-link sidebar-page" aria-label="æ–‡ç«  11"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  11<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article12.html" class="nav-link sidebar-link sidebar-page" aria-label="æ–‡ç«  12"><span class="icon iconfont icon-edit" style=""></span>æ–‡ç«  12<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-lock" style=""></span>Netty</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://changlu.blog.csdn.net" target="_blank" rel="noopener noreferrer">é•¿è·¯</a></span><span property="author" content="é•¿è·¯"></span></span><!----><!----><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category8 clickable" role="navigation">é¢è¯•é¢˜</li><meta property="articleSection" content="é¢è¯•é¢˜"></ul></span><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag8 clickable" role="navigation">Nioä¸Netty</li></ul><meta property="keywords" content="Nioä¸Netty"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 17 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT17M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_1ã€bio-nio-å’Œ-aio-æœ‰å•¥åŒºåˆ«" class="router-link-active router-link-exact-active toc-link level2">1ã€BIO,NIO å’Œ AIO æœ‰å•¥åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_2ã€netty-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">2ã€Netty æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨-nio-å‘¢" class="router-link-active router-link-exact-active toc-link level2">3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨ NIO å‘¢?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_4ã€ä¸ºä»€ä¹ˆè¦ç”¨-netty" class="router-link-active router-link-exact-active toc-link level2">4ã€ä¸ºä»€ä¹ˆè¦ç”¨ Nettyï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_5ã€netty-åº”ç”¨åœºæ™¯äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">5ã€Netty åº”ç”¨åœºæ™¯äº†è§£ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº†-netty" class="router-link-active router-link-exact-active toc-link level2">6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº† Netty?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_7ã€ä»‹ç»ä¸€ä¸‹-netty-çš„æ ¸å¿ƒç»„ä»¶" class="router-link-active router-link-exact-active toc-link level2">7ã€ä»‹ç»ä¸€ä¸‹ Netty çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_1ã€bytebuf-å­—èŠ‚å®¹å™¨" class="router-link-active router-link-exact-active toc-link level3">1ã€Bytebufï¼ˆå­—èŠ‚å®¹å™¨ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_2ã€bootstrap-å’Œ-serverbootstrap-å¯åŠ¨å¼•å¯¼ç±»" class="router-link-active router-link-exact-active toc-link level3">2ã€Bootstrap å’Œ ServerBootstrapï¼ˆå¯åŠ¨å¼•å¯¼ç±»ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_3ã€channel-ç½‘ç»œæ“ä½œæŠ½è±¡ç±»" class="router-link-active router-link-exact-active toc-link level3">3ã€Channelï¼ˆç½‘ç»œæ“ä½œæŠ½è±¡ç±»ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_4ã€eventloop-äº‹ä»¶å¾ªç¯" class="router-link-active router-link-exact-active toc-link level3">4ã€EventLoopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_5ã€channelhandler-æ¶ˆæ¯å¤„ç†å™¨-å’Œ-channelpipeline-channelhandler-å¯¹è±¡é“¾è¡¨" class="router-link-active router-link-exact-active toc-link level3">5ã€ChannelHandlerï¼ˆæ¶ˆæ¯å¤„ç†å™¨ï¼‰ å’Œ ChannelPipelineï¼ˆChannelHandler å¯¹è±¡é“¾è¡¨ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_6ã€channelfuture-æ“ä½œæ‰§è¡Œç»“æœ" class="router-link-active router-link-exact-active toc-link level3">6ã€ChannelFutureï¼ˆæ“ä½œæ‰§è¡Œç»“æœï¼‰</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_8ã€nioeventloopgroup-é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹" class="router-link-active router-link-exact-active toc-link level2">8ã€NioEventLoopGroup é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_9ã€reactor-çº¿ç¨‹æ¨¡å‹" class="router-link-active router-link-exact-active toc-link level2">9ã€Reactor çº¿ç¨‹æ¨¡å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_10ã€netty-çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">10ã€Netty çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_11ã€netty-æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">11ã€Netty æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_12ã€ä»€ä¹ˆæ˜¯-tcp-ç²˜åŒ…-æ‹†åŒ…-æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢" class="router-link-active router-link-exact-active toc-link level2">12ã€ä»€ä¹ˆæ˜¯ TCP ç²˜åŒ…/æ‹†åŒ…?æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_13ã€netty-é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">13ã€Netty é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/interview/NIO%E4%B8%8ENetty.html#_14ã€netty-çš„é›¶æ‹·è´äº†è§£ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">14ã€Netty çš„é›¶æ‹·è´äº†è§£ä¹ˆï¼Ÿ</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="netty" tabindex="-1"><a class="header-anchor" href="#netty" aria-hidden="true">#</a> Netty</h1><h2 id="_1ã€bio-nio-å’Œ-aio-æœ‰å•¥åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_1ã€bio-nio-å’Œ-aio-æœ‰å•¥åŒºåˆ«" aria-hidden="true">#</a> 1ã€BIO,NIO å’Œ AIO æœ‰å•¥åŒºåˆ«ï¼Ÿ</h2><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191314806.png" alt="image-20220619131424717" loading="lazy"></p><ul><li>BIO (Blocking I/O): åŒæ­¥é˜»å¡ I/O æ¨¡å¼ï¼Œæ•°æ®çš„è¯»å–å†™å…¥å¿…é¡»é˜»å¡åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ç­‰å¾…å…¶å®Œæˆã€‚åœ¨å®¢æˆ·ç«¯è¿æ¥æ•°é‡ä¸é«˜çš„æƒ…å†µä¸‹ï¼Œæ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†æ˜¯ï¼Œå½“é¢å¯¹åä¸‡ç”šè‡³ç™¾ä¸‡çº§è¿æ¥çš„æ—¶å€™ï¼Œä¼ ç»Ÿçš„ BIO æ¨¡å‹æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´é«˜æ•ˆçš„ I/O å¤„ç†æ¨¡å‹æ¥åº”å¯¹æ›´é«˜çš„å¹¶å‘é‡ã€‚</li><li>NIO (Non-blocking/New I/O): NIO æ˜¯ä¸€ç§åŒæ­¥éé˜»å¡çš„ I/O æ¨¡å‹ï¼Œäº Java 1.4 ä¸­å¼•å…¥ï¼Œå¯¹åº” java.nioåŒ…ï¼Œæä¾›äº† Channel , Selectorï¼ŒBuffer ç­‰æŠ½è±¡ã€‚NIO ä¸­çš„ N å¯ä»¥ç†è§£ä¸º Non-blockingï¼Œä¸å•çº¯æ˜¯ Newã€‚å®ƒæ”¯æŒé¢å‘ç¼“å†²çš„ï¼ŒåŸºäºé€šé“çš„ I/O æ“ä½œæ–¹æ³•ã€‚ NIO æä¾›äº†ä¸ä¼ ç»Ÿ BIO æ¨¡å‹ä¸­çš„ Socket å’Œ ServerSocket ç›¸å¯¹åº”çš„ SocketChannel å’Œ ServerSocketChannel ä¸¤ç§ä¸åŒçš„å¥—æ¥å­—é€šé“å®ç°,ä¸¤ç§é€šé“éƒ½æ”¯æŒé˜»å¡å’Œéé˜»å¡ä¸¤ç§æ¨¡å¼ã€‚å¯¹äºé«˜è´Ÿè½½ã€é«˜å¹¶å‘çš„ï¼ˆç½‘ç»œï¼‰åº”ç”¨ï¼Œåº”ä½¿ç”¨ NIO çš„éé˜»å¡æ¨¡å¼æ¥å¼€å‘</li><li>AIO (Asynchronous I/O): AIO ä¹Ÿå°±æ˜¯ NIO 2ã€‚åœ¨ Java 7 ä¸­å¼•å…¥äº† NIO çš„æ”¹è¿›ç‰ˆ NIO 2,å®ƒæ˜¯å¼‚æ­¥éé˜»å¡çš„ IO æ¨¡å‹ã€‚å¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚AIO æ˜¯å¼‚æ­¥ IO çš„ç¼©å†™ï¼Œè™½ç„¶ NIO åœ¨ç½‘ç»œæ“ä½œä¸­ï¼Œæä¾›äº†éé˜»å¡çš„æ–¹æ³•ï¼Œä½†æ˜¯ NIO çš„ IO è¡Œä¸ºè¿˜æ˜¯åŒæ­¥çš„ã€‚å¯¹äº NIO æ¥è¯´ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡çº¿ç¨‹æ˜¯åœ¨ IO æ“ä½œå‡†å¤‡å¥½æ—¶ï¼Œå¾—åˆ°é€šçŸ¥ï¼Œæ¥ç€å°±ç”±è¿™ä¸ªçº¿ç¨‹è‡ªè¡Œè¿›è¡Œ IO æ“ä½œï¼ŒIO æ“ä½œæœ¬èº«æ˜¯åŒæ­¥çš„ã€‚æŸ¥é˜…ç½‘ä¸Šç›¸å…³èµ„æ–™ï¼Œæˆ‘å‘ç°å°±ç›®å‰æ¥è¯´ AIO çš„åº”ç”¨è¿˜ä¸æ˜¯å¾ˆå¹¿æ³›ï¼ŒNetty ä¹‹å‰ä¹Ÿå°è¯•ä½¿ç”¨è¿‡ AIOï¼Œä¸è¿‡åˆæ”¾å¼ƒäº†ã€‚</li></ul><h2 id="_2ã€netty-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_2ã€netty-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 2ã€Netty æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>1ã€Netty æ˜¯ä¸€ä¸ª åŸºäº NIO çš„ client-server(å®¢æˆ·ç«¯æœåŠ¡å™¨)æ¡†æ¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥å¿«é€Ÿç®€å•åœ°å¼€å‘ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p><p>2ã€å®ƒæå¤§åœ°ç®€åŒ–å¹¶ä¼˜åŒ–äº† TCP å’Œ UDP å¥—æ¥å­—æœåŠ¡å™¨ç­‰ç½‘ç»œç¼–ç¨‹,å¹¶ä¸”æ€§èƒ½ä»¥åŠå®‰å…¨æ€§ç­‰å¾ˆå¤šæ–¹é¢ç”šè‡³éƒ½è¦æ›´å¥½ã€‚</p><p>3ã€æ”¯æŒå¤šç§åè®®ï¼Œå¦‚ FTPï¼ŒSMTPï¼ŒHTTP ä»¥åŠå„ç§äºŒè¿›åˆ¶å’ŒåŸºäºæ–‡æœ¬çš„ä¼ ç»Ÿåè®®ã€‚</p><p>ç”¨å®˜æ–¹çš„æ€»ç»“å°±æ˜¯ï¼šNetty æˆåŠŸåœ°æ‰¾åˆ°äº†ä¸€ç§åœ¨ä¸å¦¥åå¯ç»´æŠ¤æ€§å’Œæ€§èƒ½çš„æƒ…å†µä¸‹å®ç°æ˜“äºå¼€å‘ï¼Œæ€§èƒ½ï¼Œç¨³å®šæ€§å’Œçµæ´»æ€§çš„æ–¹æ³•ã€‚</p><p>ç½‘ç»œç¼–ç¨‹æˆ‘æ„¿æ„ç§°ä¸­ Netty ä¸ºç‹ ã€‚</p><h2 id="_3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨-nio-å‘¢" tabindex="-1"><a class="header-anchor" href="#_3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨-nio-å‘¢" aria-hidden="true">#</a> 3ã€ä¸ºå•¥ä¸ç›´æ¥ç”¨ NIO å‘¢?</h2><p>ä¸ç”¨ NIO ä¸»è¦æ˜¯å› ä¸º NIO çš„ç¼–ç¨‹æ¨¡å‹å¤æ‚è€Œä¸”å­˜åœ¨ä¸€äº› BUGï¼Œå¹¶ä¸”å¯¹ç¼–ç¨‹åŠŸåº•è¦æ±‚æ¯”è¾ƒé«˜ã€‚</p><p>NIO åœ¨é¢å¯¹æ–­è¿é‡è¿ã€åŒ…ä¸¢å¤±ã€ç²˜åŒ…ç­‰é—®é¢˜æ—¶å¤„ç†è¿‡ç¨‹éå¸¸å¤æ‚ã€‚Netty çš„å‡ºç°æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ã€‚</p><h2 id="_4ã€ä¸ºä»€ä¹ˆè¦ç”¨-netty" tabindex="-1"><a class="header-anchor" href="#_4ã€ä¸ºä»€ä¹ˆè¦ç”¨-netty" aria-hidden="true">#</a> 4ã€ä¸ºä»€ä¹ˆè¦ç”¨ Nettyï¼Ÿ</h2><p>å› ä¸º Netty å…·æœ‰ä¸‹é¢è¿™äº›ä¼˜ç‚¹ï¼Œå¹¶ä¸”ç›¸æ¯”äºç›´æ¥ä½¿ç”¨ JDK è‡ªå¸¦çš„ NIO ç›¸å…³çš„ API æ¥è¯´æ›´åŠ æ˜“ç”¨ã€‚</p><ul><li>ç»Ÿä¸€çš„ APIï¼Œæ”¯æŒå¤šç§ä¼ è¾“ç±»å‹ï¼Œé˜»å¡å’Œéé˜»å¡çš„ã€‚</li><li>ç®€å•è€Œå¼ºå¤§çš„<strong>çº¿ç¨‹æ¨¡å‹</strong>ã€‚</li><li>è‡ªå¸¦ç¼–è§£ç å™¨<strong>è§£å†³ TCP ç²˜åŒ…/æ‹†åŒ…é—®é¢˜</strong>ã€‚</li><li><strong>è‡ªå¸¦å„ç§åè®®æ ˆ</strong>ã€‚</li><li>çœŸæ­£çš„æ— è¿æ¥æ•°æ®åŒ…å¥—æ¥å­—æ”¯æŒã€‚</li><li>æ¯”ç›´æ¥ä½¿ç”¨ Java æ ¸å¿ƒ API æœ‰æ›´é«˜çš„ååé‡ã€æ›´ä½çš„å»¶è¿Ÿã€æ›´ä½çš„èµ„æºæ¶ˆè€—å’Œæ›´å°‘çš„å†…å­˜å¤åˆ¶ã€‚</li><li>å®‰å…¨æ€§ä¸é”™ï¼Œæœ‰å®Œæ•´çš„ SSL/TLS ä»¥åŠ StartTLS æ”¯æŒã€‚</li><li>ç¤¾åŒºæ´»è·ƒ</li><li>æˆç†Ÿç¨³å®šï¼Œç»å†äº†å¤§å‹é¡¹ç›®çš„ä½¿ç”¨å’Œè€ƒéªŒï¼Œè€Œä¸”å¾ˆå¤šå¼€æºé¡¹ç›®éƒ½ä½¿ç”¨åˆ°äº† Nettyï¼Œ æ¯”å¦‚æˆ‘ä»¬ç»å¸¸æ¥è§¦çš„ Dubboã€RocketMQ ç­‰ç­‰ã€‚</li><li>......</li></ul><h2 id="_5ã€netty-åº”ç”¨åœºæ™¯äº†è§£ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_5ã€netty-åº”ç”¨åœºæ™¯äº†è§£ä¹ˆ" aria-hidden="true">#</a> 5ã€Netty åº”ç”¨åœºæ™¯äº†è§£ä¹ˆï¼Ÿ</h2><p>Netty ä¸»è¦ç”¨æ¥åšç½‘ç»œé€šä¿¡ :</p><p>1ã€ä½œä¸º <strong>RPC æ¡†æ¶çš„ç½‘ç»œé€šä¿¡å·¥å…·</strong> ï¼š æˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸åŒæœåŠ¡èŠ‚ç‚¹ä¹‹é—´ç»å¸¸éœ€è¦ç›¸äº’è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ RPC æ¡†æ¶äº†ã€‚ä¸åŒæœåŠ¡æŒ‡ç‚¹çš„é€šä¿¡æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ Netty æ¥åšã€‚æ¯”å¦‚æˆ‘è°ƒç”¨å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹çš„æ–¹æ³•çš„è¯ï¼Œè‡³å°‘æ˜¯è¦è®©å¯¹æ–¹çŸ¥é“æˆ‘è°ƒç”¨çš„æ˜¯å“ªä¸ªç±»ä¸­çš„å“ªä¸ªæ–¹æ³•ä»¥åŠç›¸å…³å‚æ•°å§ï¼</p><p>2ã€<strong>å®ç°ä¸€ä¸ªè‡ªå·±çš„ HTTP æœåŠ¡å™¨</strong> ï¼šé€šè¿‡ Netty æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œè¿™ä¸ªå¤§å®¶åº”è¯¥ä¸é™Œç”Ÿã€‚è¯´åˆ° HTTP æœåŠ¡å™¨çš„è¯ï¼Œä½œä¸º Java åç«¯å¼€å‘ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Tomcat æ¯”è¾ƒå¤šã€‚ä¸€ä¸ªæœ€åŸºæœ¬çš„ HTTP æœåŠ¡å™¨å¯è¦ä»¥å¤„ç†å¸¸è§çš„ HTTP Method çš„è¯·æ±‚ï¼Œæ¯”å¦‚ POST è¯·æ±‚ã€GET è¯·æ±‚ç­‰ç­‰ã€‚</p><p>3ã€<strong>å®ç°ä¸€ä¸ªå³æ—¶é€šè®¯ç³»ç»Ÿ</strong> ï¼š ä½¿ç”¨ Netty æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªå¯ä»¥èŠå¤©ç±»ä¼¼å¾®ä¿¡çš„å³æ—¶é€šè®¯ç³»ç»Ÿï¼Œè¿™æ–¹é¢çš„å¼€æºé¡¹ç›®è¿˜è›®å¤šçš„ï¼Œå¯ä»¥è‡ªè¡Œå» Github æ‰¾ä¸€æ‰¾ã€‚</p><p>4ã€<strong>å®ç°æ¶ˆæ¯æ¨é€ç³»ç»Ÿ</strong> ï¼šå¸‚é¢ä¸Šæœ‰å¾ˆå¤šæ¶ˆæ¯æ¨é€ç³»ç»Ÿéƒ½æ˜¯åŸºäº Netty æ¥åšçš„ã€‚</p><h2 id="_6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº†-netty" tabindex="-1"><a class="header-anchor" href="#_6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº†-netty" aria-hidden="true">#</a> 6ã€é‚£äº›å¼€æºé¡¹ç›®ç”¨åˆ°äº† Netty?</h2><p>Dubboã€RocketMQã€Elasticsearchã€gRPC ç­‰ç­‰éƒ½ç”¨åˆ°äº† Netty</p><h2 id="_7ã€ä»‹ç»ä¸€ä¸‹-netty-çš„æ ¸å¿ƒç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_7ã€ä»‹ç»ä¸€ä¸‹-netty-çš„æ ¸å¿ƒç»„ä»¶" aria-hidden="true">#</a> 7ã€ä»‹ç»ä¸€ä¸‹ Netty çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ</h2><p>ç®€å•ä»‹ç» Netty æœ€æ ¸å¿ƒçš„ä¸€äº›ç»„ä»¶ï¼ˆå¯¹äºæ¯ä¸€ä¸ªç»„ä»¶è¿™é‡Œä¸è¯¦ç»†ä»‹ç»ï¼‰ã€‚é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ä½ å¯ä»¥å°†æˆ‘æåˆ°çš„è¿™äº› Netty æ ¸å¿ƒç»„ä»¶ä¸²è”èµ·æ¥ã€‚</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191321137.png" alt="image-20220619132111063" loading="lazy"></p><h3 id="_1ã€bytebuf-å­—èŠ‚å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_1ã€bytebuf-å­—èŠ‚å®¹å™¨" aria-hidden="true">#</a> 1ã€Bytebufï¼ˆå­—èŠ‚å®¹å™¨ï¼‰</h3><p>ç½‘ç»œé€šä¿¡æœ€ç»ˆéƒ½æ˜¯é€šè¿‡å­—èŠ‚æµè¿›è¡Œä¼ è¾“çš„ã€‚ ByteBuf å°±æ˜¯ Netty æä¾›çš„ä¸€ä¸ªå­—èŠ‚å®¹å™¨ï¼Œå…¶å†…éƒ¨æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ã€‚ å½“æˆ‘ä»¬é€šè¿‡ Netty ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼Œå°±æ˜¯é€šè¿‡ ByteBuf è¿›è¡Œçš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°† ByteBuf çœ‹ä½œæ˜¯ Netty å¯¹ Java NIO æä¾›äº† ByteBuffer å­—èŠ‚å®¹å™¨çš„å°è£…å’ŒæŠ½è±¡ã€‚</p><p><strong>ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ Java NIO æä¾›çš„ ByteBuffer å‘¢ï¼Ÿ</strong></p><p>å¯ä»¥è¿›è¡ŒåŠ¨æ€æ‰©å®¹ï¼Œå¹¶ä¸”ByteBuffer è¿™ä¸ªç±»ä½¿ç”¨èµ·æ¥è¿‡äºå¤æ‚å’Œç¹çã€‚</p><h3 id="_2ã€bootstrap-å’Œ-serverbootstrap-å¯åŠ¨å¼•å¯¼ç±»" tabindex="-1"><a class="header-anchor" href="#_2ã€bootstrap-å’Œ-serverbootstrap-å¯åŠ¨å¼•å¯¼ç±»" aria-hidden="true">#</a> 2ã€Bootstrap å’Œ ServerBootstrapï¼ˆå¯åŠ¨å¼•å¯¼ç±»ï¼‰</h3><p>Bootstrap æ˜¯å®¢æˆ·ç«¯çš„å¯åŠ¨å¼•å¯¼ç±»/è¾…åŠ©ç±»ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191324976.png" alt="image-20220619132440933" loading="lazy"></p><p>ServerBootstrap å®¢æˆ·ç«¯çš„å¯åŠ¨å¼•å¯¼ç±»/è¾…åŠ©ç±»ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191325136.png" alt="image-20220619132507078" loading="lazy"></p><p>ä»ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p><p>1ã€Bootstrap é€šå¸¸ä½¿ç”¨ connet() æ–¹æ³•è¿æ¥åˆ°è¿œç¨‹çš„ä¸»æœºå’Œç«¯å£ï¼Œä½œä¸ºä¸€ä¸ª Netty TCP åè®®é€šä¿¡ä¸­çš„å®¢æˆ·ç«¯ã€‚å¦å¤–ï¼ŒBootstrap ä¹Ÿå¯ä»¥é€šè¿‡ bind() æ–¹æ³•ç»‘å®šæœ¬åœ°çš„ä¸€ä¸ªç«¯å£ï¼Œä½œä¸º UDP åè®®é€šä¿¡ä¸­çš„ä¸€ç«¯ã€‚</p><p>2ã€ServerBootstrapé€šå¸¸ä½¿ç”¨ bind() æ–¹æ³•ç»‘å®šæœ¬åœ°çš„ç«¯å£ä¸Šï¼Œç„¶åç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ã€‚</p><p>3ã€Bootstrap åªéœ€è¦é…ç½®ä¸€ä¸ªçº¿ç¨‹ç»„â€” EventLoopGroup ,è€Œ ServerBootstrapéœ€è¦é…ç½®ä¸¤ä¸ªçº¿ç¨‹ç»„â€” EventLoopGroup ï¼Œä¸€ä¸ªç”¨äºæ¥æ”¶è¿æ¥ï¼Œä¸€ä¸ªç”¨äºå…·ä½“çš„ IO å¤„ç†ã€‚</p><h3 id="_3ã€channel-ç½‘ç»œæ“ä½œæŠ½è±¡ç±»" tabindex="-1"><a class="header-anchor" href="#_3ã€channel-ç½‘ç»œæ“ä½œæŠ½è±¡ç±»" aria-hidden="true">#</a> 3ã€Channelï¼ˆç½‘ç»œæ“ä½œæŠ½è±¡ç±»ï¼‰</h3><p>Channel æ¥å£æ˜¯ Netty å¯¹ç½‘ç»œæ“ä½œæŠ½è±¡ç±»ã€‚é€šè¿‡ Channel æˆ‘ä»¬å¯ä»¥è¿›è¡Œ I/O æ“ä½œã€‚</p><p>ä¸€æ—¦å®¢æˆ·ç«¯æˆåŠŸè¿æ¥æœåŠ¡ç«¯ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ª Channel åŒè¯¥ç”¨æˆ·ç«¯è¿›è¡Œç»‘å®šï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191326391.png" alt="image-20220619132641343" loading="lazy"></p><p>æ¯”è¾ƒå¸¸ç”¨çš„Channelæ¥å£å®ç°ç±»æ˜¯ ï¼š</p><ul><li>NioServerSocketChannelï¼ˆæœåŠ¡ç«¯ï¼‰</li><li>NioSocketChannelï¼ˆå®¢æˆ·ç«¯ï¼‰</li></ul><p>è¿™ä¸¤ä¸ª Channel å¯ä»¥å’Œ BIO ç¼–ç¨‹æ¨¡å‹ä¸­çš„ServerSocketä»¥åŠSocketä¸¤ä¸ªæ¦‚å¿µå¯¹åº”ä¸Šã€‚</p><h3 id="_4ã€eventloop-äº‹ä»¶å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#_4ã€eventloop-äº‹ä»¶å¾ªç¯" aria-hidden="true">#</a> 4ã€EventLoopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰</h3><blockquote><p><strong>EventLoop ä»‹ç»</strong></p></blockquote><p>EventLoop å®šä¹‰äº† Netty çš„æ ¸å¿ƒæŠ½è±¡ï¼Œç”¨äºå¤„ç†è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸä¸­æ‰€å‘ç”Ÿçš„äº‹ä»¶ã€‚</p><p>EventLoop çš„ä¸»è¦ä½œç”¨å®é™…å°±æ˜¯è´£ç›‘å¬ç½‘ç»œäº‹ä»¶å¹¶è°ƒç”¨äº‹ä»¶å¤„ç†å™¨è¿›è¡Œç›¸å…³ I/O æ“ä½œï¼ˆè¯»å†™ï¼‰çš„å¤„ç†ã€‚</p><blockquote><p><strong>Channel å’Œ EventLoop çš„å…³ç³»</strong></p></blockquote><p>Channel ä¸º Netty ç½‘ç»œæ“ä½œ(è¯»å†™ç­‰æ“ä½œ)æŠ½è±¡ç±»ï¼ŒEventLoop è´Ÿè´£å¤„ç†æ³¨å†Œåˆ°å…¶ä¸Šçš„Channel çš„ I/O æ“ä½œï¼Œä¸¤è€…é…åˆè¿›è¡Œ I/O æ“ä½œã€‚</p><blockquote><p><strong>EventloopGroup å’Œ EventLoop çš„å…³ç³»</strong></p></blockquote><p>EventLoopGroup åŒ…å«å¤šä¸ª EventLoopï¼ˆæ¯ä¸€ä¸ª EventLoop é€šå¸¸å†…éƒ¨åŒ…å«ä¸€ä¸ªçº¿ç¨‹ï¼‰ï¼Œå®ƒç®¡ç†ç€æ‰€æœ‰çš„ EventLoop çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><ul><li>EventLoop å¤„ç†çš„ I/O äº‹ä»¶éƒ½å°†åœ¨å®ƒä¸“æœ‰çš„ Thread ä¸Šè¢«å¤„ç†ï¼Œå³ Thread å’Œ EventLoop å±äº 1 : 1 çš„å…³ç³»ï¼Œä»è€Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li></ul><p>ä¸‹å›¾æ˜¯ Netty NIO æ¨¡å‹å¯¹åº”çš„ EventLoop æ¨¡å‹ã€‚é€šè¿‡è¿™ä¸ªå›¾åº”è¯¥å¯ä»¥å°†EventloopGroupã€EventLoopã€ Channelä¸‰è€…è”ç³»èµ·æ¥ï¼š</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191329064.png" alt="image-20220619132900987" loading="lazy"></p><h3 id="_5ã€channelhandler-æ¶ˆæ¯å¤„ç†å™¨-å’Œ-channelpipeline-channelhandler-å¯¹è±¡é“¾è¡¨" tabindex="-1"><a class="header-anchor" href="#_5ã€channelhandler-æ¶ˆæ¯å¤„ç†å™¨-å’Œ-channelpipeline-channelhandler-å¯¹è±¡é“¾è¡¨" aria-hidden="true">#</a> 5ã€ChannelHandlerï¼ˆæ¶ˆæ¯å¤„ç†å™¨ï¼‰ å’Œ ChannelPipelineï¼ˆChannelHandler å¯¹è±¡é“¾è¡¨ï¼‰</h3><p>ChannelHandler æ˜¯æ¶ˆæ¯çš„å…·ä½“å¤„ç†å™¨ï¼Œä¸»è¦è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯/æœåŠ¡ç«¯æ¥æ”¶å’Œå‘é€çš„æ•°æ®ã€‚</p><p>å½“ Channel è¢«åˆ›å»ºæ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åœ°åˆ†é…åˆ°å®ƒä¸“å±çš„ ChannelPipelineã€‚ ä¸€ä¸ªChannelåŒ…å«ä¸€ä¸ª ChannelPipelineã€‚ ChannelPipeline ä¸º ChannelHandler çš„é“¾ï¼Œä¸€ä¸ª pipeline ä¸Šå¯ä»¥æœ‰å¤šä¸ª ChannelHandlerã€‚</p><p>æˆ‘ä»¬å¯ä»¥åœ¨ ChannelPipeline ä¸Šé€šè¿‡ addLast() æ–¹æ³•æ·»åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªChannelHandler ï¼ˆä¸€ä¸ªæ•°æ®æˆ–è€…äº‹ä»¶å¯èƒ½ä¼šè¢«å¤šä¸ª Handler å¤„ç†ï¼‰ ã€‚å½“ä¸€ä¸ª ChannelHandler å¤„ç†å®Œä¹‹åå°±å°†æ•°æ®äº¤ç»™ä¸‹ä¸€ä¸ª ChannelHandler ã€‚</p><p>å½“ ChannelHandler è¢«æ·»åŠ åˆ°çš„ ChannelPipeline å®ƒå¾—åˆ°ä¸€ä¸ª ChannelHandlerContextï¼Œå®ƒä»£è¡¨ä¸€ä¸ª ChannelHandler å’Œ ChannelPipeline ä¹‹é—´çš„â€œç»‘å®šâ€ã€‚ ChannelPipeline é€šè¿‡ ChannelHandlerContextæ¥é—´æ¥ç®¡ç† ChannelHandler ã€‚</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191330085.png" alt="image-20220619133035046" loading="lazy"></p><h3 id="_6ã€channelfuture-æ“ä½œæ‰§è¡Œç»“æœ" tabindex="-1"><a class="header-anchor" href="#_6ã€channelfuture-æ“ä½œæ‰§è¡Œç»“æœ" aria-hidden="true">#</a> 6ã€ChannelFutureï¼ˆæ“ä½œæ‰§è¡Œç»“æœï¼‰</h3><p>Netty ä¸­æ‰€æœ‰çš„ I/O æ“ä½œéƒ½ä¸ºå¼‚æ­¥çš„ï¼Œæˆ‘ä»¬ä¸èƒ½ç«‹åˆ»å¾—åˆ°æ“ä½œæ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚</p><p>ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡ ChannelFuture æ¥å£çš„ addListener() æ–¹æ³•æ³¨å†Œä¸€ä¸ª ChannelFutureListenerï¼Œå½“æ“ä½œæ‰§è¡ŒæˆåŠŸæˆ–è€…å¤±è´¥æ—¶ï¼Œç›‘å¬å°±ä¼šè‡ªåŠ¨è§¦å‘è¿”å›ç»“æœã€‚</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191331881.png" alt="image-20220619133122844" loading="lazy"></p><p>å¹¶ä¸”ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ChannelFuture çš„ channel() æ–¹æ³•è·å–è¿æ¥ç›¸å…³è”çš„Channel ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Channel</span> channel <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ ChannelFuture æ¥å£çš„ sync()æ–¹æ³•è®©å¼‚æ­¥çš„æ“ä½œç¼–ç¨‹åŒæ­¥çš„ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//bind()æ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡ sync()æ–¹æ³•å°†å…¶å˜ä¸ºåŒæ­¥ã€‚</span>
<span class="token class-name">ChannelFuture</span> f <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8ã€nioeventloopgroup-é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#_8ã€nioeventloopgroup-é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹" aria-hidden="true">#</a> 8ã€NioEventLoopGroup é»˜è®¤çš„æ„é€ å‡½æ•°ä¼šèµ·å¤šå°‘çº¿ç¨‹ï¼Ÿ</h2><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬å‘ç° NioEventLoopGroup é»˜è®¤çš„æ„é€ å‡½æ•°å®é™…ä¼šèµ·çš„çº¿ç¨‹æ•°ä¸º <code>CPUæ ¸å¿ƒæ•°*2</code>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ ç»§ç»­æ·±å…¥ä¸‹å»çœ‹æ„é€ å‡½æ•°çš„è¯ï¼Œä½ ä¼šå‘ç°æ¯ä¸ªNioEventLoopGroupå¯¹è±¡å†…éƒ¨éƒ½ä¼šåˆ†é…ä¸€ç»„NioEventLoopï¼Œå…¶å¤§å°æ˜¯ nThreads, è¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œ ä¸€ä¸ªNIOEventLoop å’Œä¸€ä¸ªçº¿ç¨‹ç›¸å¯¹åº”ï¼Œè¿™å’Œæˆ‘ä»¬ä¸Šé¢è¯´çš„ EventloopGroup å’Œ EventLoopå…³ç³»è¿™éƒ¨åˆ†å†…å®¹ç›¸å¯¹åº”</p><h2 id="_9ã€reactor-çº¿ç¨‹æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_9ã€reactor-çº¿ç¨‹æ¨¡å‹" aria-hidden="true">#</a> 9ã€Reactor çº¿ç¨‹æ¨¡å‹</h2><p>Reactor æ˜¯ä¸€ç§ç»å…¸çš„çº¿ç¨‹æ¨¡å‹ï¼ŒReactor æ¨¡å¼åŸºäºäº‹ä»¶é©±åŠ¨ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†æµ·é‡çš„ I/O äº‹ä»¶ã€‚</p><p>Reactor çº¿ç¨‹æ¨¡å‹åˆ†ä¸ºå•çº¿ç¨‹æ¨¡å‹ã€å¤šçº¿ç¨‹æ¨¡å‹ä»¥åŠä¸»ä»å¤šçº¿ç¨‹æ¨¡å‹ã€‚</p><blockquote><p><strong>å•çº¿ç¨‹ Reactor</strong></p></blockquote><p>æ‰€æœ‰çš„ IO æ“ä½œéƒ½ç”±åŒä¸€ä¸ª NIO çº¿ç¨‹å¤„ç†ã€‚</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191339700.png" alt="image-20220619133917591" loading="lazy"></p><p>å•çº¿ç¨‹ Reactor çš„ä¼˜ç‚¹æ˜¯å¯¹ç³»ç»Ÿèµ„æºæ¶ˆè€—ç‰¹åˆ«å°ï¼Œä½†æ˜¯ï¼Œæ²¡åŠæ³•æ”¯æ’‘å¤§é‡è¯·æ±‚çš„åº”ç”¨åœºæ™¯å¹¶ä¸”å¤„ç†è¯·æ±‚çš„æ—¶é—´å¯èƒ½éå¸¸æ…¢ï¼Œæ¯•ç«Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œå˜›ï¼æ‰€ä»¥ï¼Œä¸€èˆ¬å®é™…é¡¹ç›®ä¸­ä¸ä¼šä½¿ç”¨å•çº¿ç¨‹ Reactor ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæ¼”è¿›å‡ºäº† Reactor å¤šçº¿ç¨‹æ¨¡å‹ã€‚</p><blockquote><p><strong>å¤šçº¿ç¨‹ Reactor</strong></p></blockquote><p>ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ¥å—è¯·æ±‚,ä¸€ç»„ NIO çº¿ç¨‹å¤„ç† IO æ“ä½œã€‚</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191340084.png" alt="image-20220619134001970" loading="lazy"></p><p>å¤§éƒ¨åˆ†åœºæ™¯ä¸‹å¤šçº¿ç¨‹ Reactor æ¨¡å‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨ä¸€äº›å¹¶å‘è¿æ¥æ•°æ¯”è¾ƒå¤šï¼ˆå¦‚ç™¾ä¸‡å¹¶å‘ï¼‰çš„åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ¥å—å®¢æˆ·ç«¯è¯·æ±‚å°±å­˜åœ¨æ€§èƒ½é—®é¢˜äº†ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæ¼”è¿›å‡ºäº†ä¸»ä»å¤šçº¿ç¨‹ Reactor æ¨¡å‹ã€‚</p><blockquote><p><strong>ä¸»ä»å¤šçº¿ç¨‹ Reactor</strong></p></blockquote><p>ä¸€ç»„ NIO çº¿ç¨‹è´Ÿè´£æ¥å—è¯·æ±‚ï¼Œä¸€ç»„ NIO çº¿ç¨‹å¤„ç† IO æ“ä½œã€‚</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191340332.png" alt="image-20220619134040209" loading="lazy"></p><h2 id="_10ã€netty-çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_10ã€netty-çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆ" aria-hidden="true">#</a> 10ã€Netty çº¿ç¨‹æ¨¡å‹äº†è§£ä¹ˆï¼Ÿ</h2><p>å¤§éƒ¨åˆ†ç½‘ç»œæ¡†æ¶éƒ½æ˜¯åŸºäº Reactor æ¨¡å¼è®¾è®¡å¼€å‘çš„ã€‚</p><p>Reactor æ¨¡å¼åŸºäºäº‹ä»¶é©±åŠ¨ï¼Œé‡‡ç”¨å¤šè·¯å¤ç”¨å°†äº‹ä»¶åˆ†å‘ç»™ç›¸åº”çš„ Handler å¤„ç†ï¼Œéå¸¸é€‚åˆå¤„ç†æµ·é‡ IO çš„åœºæ™¯ã€‚</p><p>åœ¨ Netty ä¸»è¦é  NioEventLoopGroup çº¿ç¨‹æ± æ¥å®ç°å…·ä½“çš„çº¿ç¨‹æ¨¡å‹çš„ ã€‚</p><p>æˆ‘ä»¬å®ç°æœåŠ¡ç«¯çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šåˆå§‹åŒ–ä¸¤ä¸ªçº¿ç¨‹ç»„ï¼š</p><p>1bossGroup :æ¥æ”¶è¿æ¥ã€‚ 2workerGroup ï¼šè´Ÿè´£å…·ä½“çš„å¤„ç†ï¼Œäº¤ç”±å¯¹åº”çš„ Handler å¤„ç†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸€ä¸‹ Netty ä¸­çš„çº¿ç¨‹æ¨¡å‹å§ï¼</p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191341736.png" alt="image-20220619134130662" loading="lazy"></p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191341458.png" alt="image-20220619134145386" loading="lazy"></p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191341681.png" alt="image-20220619134155615" loading="lazy"></p><p><img src="https://pictured-bed.oss-cn-beijing.aliyuncs.com/img/2022/6/202206191342848.png" alt="image-20220619134215744" loading="lazy"></p><h2 id="_11ã€netty-æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_11ã€netty-æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆ" aria-hidden="true">#</a> 11ã€Netty æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨è¿‡ç¨‹äº†è§£ä¹ˆï¼Ÿ</h2><blockquote><p>æœåŠ¡ç«¯</p></blockquote><p>ç®€å•è§£æä¸€ä¸‹æœåŠ¡ç«¯çš„åˆ›å»ºè¿‡ç¨‹å…·ä½“æ˜¯æ€æ ·çš„ï¼š</p><p>1ã€é¦–å…ˆä½ åˆ›å»ºäº†ä¸¤ä¸ª NioEventLoopGroup å¯¹è±¡å®ä¾‹ï¼šbossGroup å’Œ workerGroupã€‚</p><ul><li>bossGroup : ç”¨äºå¤„ç†å®¢æˆ·ç«¯çš„ TCP è¿æ¥è¯·æ±‚ã€‚</li><li>workerGroup ï¼š è´Ÿè´£æ¯ä¸€æ¡è¿æ¥çš„å…·ä½“è¯»å†™æ•°æ®çš„å¤„ç†é€»è¾‘ï¼ŒçœŸæ­£è´Ÿè´£ I/O è¯»å†™æ“ä½œï¼Œäº¤ç”±å¯¹åº”çš„ Handler å¤„ç†ã€‚</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ä»¬æŠŠå…¬å¸çš„è€æ¿å½“åš bossGroupï¼Œå‘˜å·¥å½“åš workerGroupï¼ŒbossGroup åœ¨å¤–é¢æ¥å®Œæ´»ä¹‹åï¼Œæ‰”ç»™ workerGroup å»å¤„ç†ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šæŒ‡å®š bossGroup çš„ çº¿ç¨‹æ•°ä¸º 1ï¼ˆå¹¶å‘è¿æ¥é‡ä¸å¤§çš„æ—¶å€™ï¼‰ ï¼ŒworkGroup çš„çº¿ç¨‹æ•°é‡ä¸º CPU æ ¸å¿ƒæ•° *2 ã€‚å¦å¤–ï¼Œæ ¹æ®æºç æ¥çœ‹ï¼Œä½¿ç”¨ NioEventLoopGroup ç±»çš„æ— å‚æ„é€ å‡½æ•°è®¾ç½®çº¿ç¨‹æ•°é‡çš„é»˜è®¤å€¼å°±æ˜¯ CPU æ ¸å¿ƒæ•° *2 ã€‚</p><p>2ã€æ¥ä¸‹æ¥ æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ç«¯å¯åŠ¨å¼•å¯¼/è¾…åŠ©ç±»ï¼š ServerBootstrapï¼Œè¿™ä¸ªç±»å°†å¼•å¯¼æˆ‘ä»¬è¿›è¡ŒæœåŠ¡ç«¯çš„å¯åŠ¨å·¥ä½œã€‚</p><p>3ã€é€šè¿‡ .group() æ–¹æ³•ç»™å¼•å¯¼ç±» ServerBootstrap é…ç½®ä¸¤å¤§çº¿ç¨‹ç»„ï¼Œç¡®å®šäº†çº¿ç¨‹æ¨¡å‹ã€‚</p><p>é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å®é™…é…ç½®çš„æ˜¯å¤šçº¿ç¨‹æ¨¡å‹ï¼Œè¿™ä¸ªåœ¨ä¸Šé¢æåˆ°è¿‡ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">EventLoopGroup</span> bossGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">EventLoopGroup</span> workerGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>4ã€é€šè¿‡channel()æ–¹æ³•ç»™å¼•å¯¼ç±» ServerBootstrapæŒ‡å®šäº† IO æ¨¡å‹ä¸ºNIO</p><ul><li>NioServerSocketChannel ï¼šæŒ‡å®šæœåŠ¡ç«¯çš„ IO æ¨¡å‹ä¸º NIOï¼Œä¸ BIO ç¼–ç¨‹æ¨¡å‹ä¸­çš„ServerSocketå¯¹åº”</li><li>NioSocketChannel : æŒ‡å®šå®¢æˆ·ç«¯çš„ IO æ¨¡å‹ä¸º NIOï¼Œ ä¸ BIO ç¼–ç¨‹æ¨¡å‹ä¸­çš„Socketå¯¹åº” 5.é€šè¿‡ .childHandler()ç»™å¼•å¯¼ç±»åˆ›å»ºä¸€ä¸ªChannelInitializer ï¼Œç„¶åæŒ‡å®šäº†æœåŠ¡ç«¯æ¶ˆæ¯çš„ä¸šåŠ¡å¤„ç†é€»è¾‘ HelloServerHandler å¯¹è±¡ 6.è°ƒç”¨ ServerBootstrap ç±»çš„ bind()æ–¹æ³•ç»‘å®šç«¯å£</li></ul><blockquote><p>å®¢æˆ·ç«¯</p></blockquote><p>ç»§ç»­åˆ†æä¸€ä¸‹å®¢æˆ·ç«¯çš„åˆ›å»ºæµç¨‹ï¼š</p><p>1ã€åˆ›å»ºä¸€ä¸ª NioEventLoopGroup å¯¹è±¡å®ä¾‹</p><p>2ã€åˆ›å»ºå®¢æˆ·ç«¯å¯åŠ¨çš„å¼•å¯¼ç±»æ˜¯ Bootstrap</p><p>3ã€é€šè¿‡ .group() æ–¹æ³•ç»™å¼•å¯¼ç±» Bootstrap é…ç½®ä¸€ä¸ªçº¿ç¨‹ç»„</p><p>4ã€é€šè¿‡channel()æ–¹æ³•ç»™å¼•å¯¼ç±» BootstrapæŒ‡å®šäº† IO æ¨¡å‹ä¸ºNIO</p><p>5ã€é€šè¿‡ .childHandler()ç»™å¼•å¯¼ç±»åˆ›å»ºä¸€ä¸ªChannelInitializer ï¼Œç„¶åæŒ‡å®šäº†å®¢æˆ·ç«¯æ¶ˆæ¯çš„ä¸šåŠ¡å¤„ç†é€»è¾‘ HelloClientHandler å¯¹è±¡</p><p>6ã€è°ƒç”¨ Bootstrap ç±»çš„ connect()æ–¹æ³•è¿›è¡Œè¿æ¥ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>inetHost : ip åœ°å€</li><li>inetPort : ç«¯å£å·</li></ul><p>connect æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Future ç±»å‹çš„å¯¹è±¡</p><p>ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ˜¯å¼‚æ­¥çš„ï¼Œæˆ‘ä»¬é€šè¿‡ addListener æ–¹æ³•å¯ä»¥ç›‘å¬åˆ°è¿æ¥æ˜¯å¦æˆåŠŸï¼Œè¿›è€Œæ‰“å°å‡ºè¿æ¥ä¿¡æ¯ã€‚</p><h2 id="_12ã€ä»€ä¹ˆæ˜¯-tcp-ç²˜åŒ…-æ‹†åŒ…-æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢" tabindex="-1"><a class="header-anchor" href="#_12ã€ä»€ä¹ˆæ˜¯-tcp-ç²˜åŒ…-æ‹†åŒ…-æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢" aria-hidden="true">#</a> 12ã€ä»€ä¹ˆæ˜¯ TCP ç²˜åŒ…/æ‹†åŒ…?æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢ï¼Ÿ</h2><p>1ã€ä½¿ç”¨ Netty è‡ªå¸¦çš„è§£ç å™¨</p><ul><li>LineBasedFrameDecoder : å‘é€ç«¯å‘é€æ•°æ®åŒ…çš„æ—¶å€™ï¼Œæ¯ä¸ªæ•°æ®åŒ…ä¹‹é—´ä»¥æ¢è¡Œç¬¦ä½œä¸ºåˆ†éš”ï¼ŒLineBasedFrameDecoder çš„å·¥ä½œåŸç†æ˜¯å®ƒä¾æ¬¡éå† ByteBuf ä¸­çš„å¯è¯»å­—èŠ‚ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ¢è¡Œç¬¦ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„æˆªå–ã€‚</li><li>DelimiterBasedFrameDecoder : å¯ä»¥è‡ªå®šä¹‰åˆ†éš”ç¬¦è§£ç å™¨ï¼ŒLineBasedFrameDecoder å®é™…ä¸Šæ˜¯ä¸€ç§ç‰¹æ®Šçš„ DelimiterBasedFrameDecoder è§£ç å™¨ã€‚</li><li>FixedLengthFrameDecoder: å›ºå®šé•¿åº¦è§£ç å™¨ï¼Œå®ƒèƒ½å¤ŸæŒ‰ç…§æŒ‡å®šçš„é•¿åº¦å¯¹æ¶ˆæ¯è¿›è¡Œç›¸åº”çš„æ‹†åŒ…ã€‚å¦‚æœä¸å¤ŸæŒ‡å®šçš„é•¿åº¦ï¼Œåˆ™ç©ºæ ¼è¡¥å…¨</li><li>LengthFieldBasedFrameDecoderï¼šåŸºäºé•¿åº¦å­—æ®µçš„è§£ç å™¨ï¼Œå‘é€çš„æ•°æ®ä¸­åŒ…å«åœ¨å‘é€çš„æ•°æ®ä¸­ã€‚</li></ul><p>2ã€è‡ªå®šä¹‰åºåˆ—åŒ–ç¼–è§£ç å™¨</p><p>åœ¨ Java ä¸­è‡ªå¸¦çš„æœ‰å®ç° Serializable æ¥å£æ¥å®ç°åºåˆ—åŒ–ï¼Œä½†ç”±äºå®ƒæ€§èƒ½ã€å®‰å…¨æ€§ç­‰åŸå› ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸ä¼šè¢«ä½¿ç”¨åˆ°çš„ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ Protostuffã€Hessian2ã€json åºåˆ—æ–¹å¼æ¯”è¾ƒå¤šï¼Œå¦å¤–è¿˜æœ‰ä¸€äº›åºåˆ—åŒ–æ€§èƒ½éå¸¸å¥½çš„åºåˆ—åŒ–æ–¹å¼ä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼š</p><ul><li>ä¸“é—¨é’ˆå¯¹ Java è¯­è¨€çš„ï¼šKryoï¼ŒFST ç­‰ç­‰</li><li>è·¨è¯­è¨€çš„ï¼šProtostuffï¼ˆåŸºäº protobuf å‘å±•è€Œæ¥ï¼‰ï¼ŒProtoBufï¼ŒThriftï¼ŒAvroï¼ŒMsgPack ç­‰ç­‰</li></ul><h2 id="_13ã€netty-é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_13ã€netty-é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆ" aria-hidden="true">#</a> 13ã€Netty é•¿è¿æ¥ã€å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆï¼Ÿ</h2><p><strong>TCP é•¿è¿æ¥å’ŒçŸ­è¿æ¥äº†è§£ä¹ˆï¼Ÿ</strong></p><p>æˆ‘ä»¬çŸ¥é“ TCP åœ¨è¿›è¡Œè¯»å†™ä¹‹å‰ï¼Œserver ä¸ client ä¹‹é—´å¿…é¡»æå‰å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ï¼Œéœ€è¦æˆ‘ä»¬å¸¸è¯´çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œé‡Šæ”¾/å…³é—­è¿æ¥çš„è¯éœ€è¦å››æ¬¡æŒ¥æ‰‹ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æ¯”è¾ƒæ¶ˆè€—ç½‘ç»œèµ„æºå¹¶ä¸”æœ‰æ—¶é—´å»¶è¿Ÿçš„ã€‚</p><p>æ‰€è°“ï¼ŒçŸ­è¿æ¥è¯´çš„å°±æ˜¯ server ç«¯ ä¸ client ç«¯å»ºç«‹è¿æ¥ä¹‹åï¼Œè¯»å†™å®Œæˆä¹‹åå°±å…³é—­æ‰è¿æ¥ï¼Œå¦‚æœä¸‹ä¸€æ¬¡å†è¦äº’ç›¸å‘é€æ¶ˆæ¯ï¼Œå°±è¦é‡æ–°è¿æ¥ã€‚çŸ­è¿æ¥çš„æœ‰ç‚¹å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ç®¡ç†å’Œå®ç°éƒ½æ¯”è¾ƒç®€å•ï¼Œç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ¯ä¸€æ¬¡çš„è¯»å†™éƒ½è¦å»ºç«‹è¿æ¥å¿…ç„¶ä¼šå¸¦æ¥å¤§é‡ç½‘ç»œèµ„æºçš„æ¶ˆè€—ï¼Œå¹¶ä¸”è¿æ¥çš„å»ºç«‹ä¹Ÿéœ€è¦è€—è´¹æ—¶é—´ã€‚</p><p>é•¿è¿æ¥è¯´çš„å°±æ˜¯ client å‘ server åŒæ–¹å»ºç«‹è¿æ¥ä¹‹åï¼Œå³ä½¿ client ä¸ server å®Œæˆä¸€æ¬¡è¯»å†™ï¼Œå®ƒä»¬ä¹‹é—´çš„è¿æ¥å¹¶ä¸ä¼šä¸»åŠ¨å…³é—­ï¼Œåç»­çš„è¯»å†™æ“ä½œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸ªè¿æ¥ã€‚é•¿è¿æ¥çš„å¯ä»¥çœå»è¾ƒå¤šçš„ TCP å»ºç«‹å’Œå…³é—­çš„æ“ä½œï¼Œé™ä½å¯¹ç½‘ç»œèµ„æºçš„ä¾èµ–ï¼ŒèŠ‚çº¦æ—¶é—´ã€‚å¯¹äºé¢‘ç¹è¯·æ±‚èµ„æºçš„å®¢æˆ·æ¥è¯´ï¼Œéå¸¸é€‚ç”¨é•¿è¿æ¥ã€‚</p><p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¿ƒè·³æœºåˆ¶ï¼ŸNetty ä¸­å¿ƒè·³æœºåˆ¶äº†è§£ä¹ˆï¼Ÿ</strong></p><p>åœ¨ TCP ä¿æŒé•¿è¿æ¥çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°æ–­ç½‘ç­‰ç½‘ç»œå¼‚å¸¸å‡ºç°ï¼Œå¼‚å¸¸å‘ç”Ÿçš„æ—¶å€™ï¼Œ client ä¸ server ä¹‹é—´å¦‚æœæ²¡æœ‰äº¤äº’çš„è¯ï¼Œå®ƒä»¬æ˜¯æ— æ³•å‘ç°å¯¹æ–¹å·²ç»æ‰çº¿çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å°±éœ€è¦å¼•å…¥ å¿ƒè·³æœºåˆ¶ ã€‚</p><p>å¿ƒè·³æœºåˆ¶çš„å·¥ä½œåŸç†æ˜¯: åœ¨ client ä¸ server ä¹‹é—´åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ•°æ®äº¤äº’æ—¶, å³å¤„äº idle çŠ¶æ€æ—¶, å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨å°±ä¼šå‘é€ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®åŒ…ç»™å¯¹æ–¹, å½“æ¥æ”¶æ–¹æ”¶åˆ°è¿™ä¸ªæ•°æ®æŠ¥æ–‡å, ä¹Ÿç«‹å³å‘é€ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®æŠ¥æ–‡, å›åº”å‘é€æ–¹, æ­¤å³ä¸€ä¸ª PING-PONG äº¤äº’ã€‚æ‰€ä»¥, å½“æŸä¸€ç«¯æ”¶åˆ°å¿ƒè·³æ¶ˆæ¯å, å°±çŸ¥é“äº†å¯¹æ–¹ä»ç„¶åœ¨çº¿, è¿™å°±ç¡®ä¿ TCP è¿æ¥çš„æœ‰æ•ˆæ€§.</p><p>TCP å®é™…ä¸Šè‡ªå¸¦çš„å°±æœ‰é•¿è¿æ¥é€‰é¡¹ï¼Œæœ¬èº«æ˜¯ä¹Ÿæœ‰å¿ƒè·³åŒ…æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯ TCP çš„é€‰é¡¹ï¼šSO_KEEPALIVEã€‚ ä½†æ˜¯ï¼ŒTCP åè®®å±‚é¢çš„é•¿è¿æ¥çµæ´»æ€§ä¸å¤Ÿã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯åœ¨åº”ç”¨å±‚åè®®ä¸Šå®ç°è‡ªå®šä¹‰å¿ƒè·³æœºåˆ¶çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨ Netty å±‚é¢é€šè¿‡ç¼–ç å®ç°ã€‚é€šè¿‡ Netty å®ç°å¿ƒè·³æœºåˆ¶çš„è¯ï¼Œæ ¸å¿ƒç±»æ˜¯ IdleStateHandler ã€‚</p><h2 id="_14ã€netty-çš„é›¶æ‹·è´äº†è§£ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_14ã€netty-çš„é›¶æ‹·è´äº†è§£ä¹ˆ" aria-hidden="true">#</a> 14ã€Netty çš„é›¶æ‹·è´äº†è§£ä¹ˆï¼Ÿ</h2><p><strong>ä¸åŒå±‚é¢è§’åº¦</strong>ï¼šåœ¨ OS å±‚é¢ä¸Šçš„ Zero-copy é€šå¸¸æŒ‡é¿å…åœ¨ ç”¨æˆ·æ€(User-space) ä¸ å†…æ ¸æ€(Kernel-space) ä¹‹é—´æ¥å›æ‹·è´æ•°æ®ã€‚è€Œåœ¨ Netty å±‚é¢ ï¼Œé›¶æ‹·è´ä¸»è¦ä½“ç°åœ¨å¯¹äºæ•°æ®æ“ä½œçš„ä¼˜åŒ–ã€‚</p><ul><li>nettyçš„é›¶æ‹·è´ä½“ç°åœ¨ç½‘ç»œæ•°æ®ä¼ è¾“ã€æ–‡ä»¶ä¼ è¾“ä»¥åŠæ•°æ®æ“ä½œçš„ä¼˜åŒ–</li></ul><p><strong>Netty ä¸­çš„é›¶æ‹·è´ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢</strong></p><p>1ã€ä½¿ç”¨ Netty æä¾›çš„ CompositeByteBuf ç±», å¯ä»¥å°†å¤šä¸ªByteBuf åˆå¹¶ä¸ºä¸€ä¸ªé€»è¾‘ä¸Šçš„ ByteBuf, é¿å…äº†å„ä¸ª ByteBuf ä¹‹é—´çš„æ‹·è´ã€‚ 2ã€ByteBuf æ”¯æŒ slice æ“ä½œ, å› æ­¤å¯ä»¥å°† ByteBuf åˆ†è§£ä¸ºå¤šä¸ªå…±äº«åŒä¸€ä¸ªå­˜å‚¨åŒºåŸŸçš„ ByteBuf, é¿å…äº†å†…å­˜çš„æ‹·è´ã€‚ 3ã€é€šè¿‡ FileRegion åŒ…è£…çš„FileChannel.tranferTo å®ç°æ–‡ä»¶ä¼ è¾“, å¯ä»¥ç›´æ¥å°†æ–‡ä»¶ç¼“å†²åŒºçš„æ•°æ®å‘é€åˆ°ç›®æ ‡ Channel, é¿å…äº†ä¼ ç»Ÿé€šè¿‡å¾ªç¯ write æ–¹å¼å¯¼è‡´çš„å†…å­˜æ‹·è´é—®é¢˜.</p><p>4ã€é€šè¿‡<code>wrap()</code>ï¼Œå¯å°†byte[]æ•°ç»„ã€ByteBufã€ByteBufferç­‰åŒ…è£…æˆä¸€ä¸ªNetty ByteBufå¯¹è±¡ï¼Œé¿å…äº†å¤åˆ¶æ‹·è´æ“ä½œã€‚</p><p>5ã€é€šè¿‡<code>duplicate()</code>ï¼Œå¯å°†æ•´ä¸ªByteBufè¿›è¡Œé›¶æ‹·è´ã€‚</p><hr><p>æ•´ç†è€…ï¼šé•¿è·¯ æ—¶é—´ï¼š2022.6.19</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/changluJava/personal-reading/edit/main/demo/src/zh/interview/NIOä¸Netty.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/zh/interview/MySQL.html" class="nav-link prev" aria-label="MySQL"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="icon iconfont icon-lock" style=""></span>MySQL</div></a><a href="/zh/interview/Redis.html" class="nav-link next" aria-label="Redis"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">Redis<span class="icon iconfont icon-lock" style=""></span></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 é•¿è·¯</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.70f4e18b.js" defer></script>
  </body>
</html>
